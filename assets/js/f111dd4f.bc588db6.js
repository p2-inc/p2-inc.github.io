"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[762],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),h=o,g=d["".concat(s,".").concat(h)]||d[h]||p[h]||a;return n?i.createElement(g,r(r({ref:t},u),{},{components:n})):i.createElement(g,r({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},95418:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return r},default:function(){return p},frontMatter:function(){return a},metadata:function(){return l},toc:function(){return c}});var i=n(83117),o=(n(67294),n(3905));const a={id:"social-login",title:"Social Login"},r=void 0,l={unversionedId:"authentication/social-login",id:"authentication/social-login",title:"Social Login",description:"Given the use of the default browser flow, configured social identity providers will be added to your authentication flow by default.",source:"@site/docs/authentication/social-login.md",sourceDirName:"authentication",slug:"/authentication/social-login",permalink:"/docs/authentication/social-login",draft:!1,editUrl:"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/authentication/social-login.md",tags:[],version:"current",frontMatter:{id:"social-login",title:"Social Login"},sidebar:"docs",previous:{title:"Username-Password",permalink:"/docs/authentication/username-password"},next:{title:"Magic Links",permalink:"/docs/authentication/magic-links"}},s={},c=[{value:"Configuring social providers",id:"configuring-social-providers",level:3},{value:"Example: GitHub",id:"example-github",level:4},{value:"GitHub setup",id:"github-setup",level:5},{value:"Login UI",id:"login-ui",level:3},{value:"Using tokens from social providers",id:"using-tokens-from-social-providers",level:3}],u={toc:c};function p(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,i.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Given the use of the default ",(0,o.kt)("inlineCode",{parentName:"p"},"browser")," flow, configured social identity providers will be added to your authentication flow by default."),(0,o.kt)("h3",{id:"configuring-social-providers"},"Configuring social providers"),(0,o.kt)("p",null,"In the ",(0,o.kt)("strong",{parentName:"p"},"Identity provders")," section, a new social provider can be added with the ",(0,o.kt)("em",{parentName:"p"},"Add provider")," button. There are several built-in options you may select from. Many social providers that don't have built-in options can also be configured using standard OpenID Connect v1.0."),(0,o.kt)("p",null,'Each provider requires you to do some initial setup on the administrative side of your social login provider. These options are usually referred to as "Applications" or "Login with X". When setting up each social provider, the wizards will take you through the information that is required from the social provider, usually some kind of Client ID and Client Secret.'),(0,o.kt)("p",null,"Complete examples of all social providers is currently outside of the scope of this section, but the following example should be instructive."),(0,o.kt)("h4",{id:"example-github"},"Example: GitHub"),(0,o.kt)("p",null,"Before you begin the GitHub portion of the setup, select ",(0,o.kt)("em",{parentName:"p"},"GitHub")," from the ",(0,o.kt)("em",{parentName:"p"},"Add provider")," dropdown button, and copy the ",(0,o.kt)("em",{parentName:"p"},"Redirect URI")," from the next page."),(0,o.kt)("h5",{id:"github-setup"},"GitHub setup"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Settings")," section of either a personal or organization GitHub account contains a ",(0,o.kt)("strong",{parentName:"p"},"Developer settings")," section. In the ",(0,o.kt)("strong",{parentName:"p"},"OAuth Apps")," part of that section select ",(0,o.kt)("em",{parentName:"p"},"New OAuth App"),"."),(0,o.kt)("p",null,"Name your application, give it the URL of your choosing, and paste the ",(0,o.kt)("em",{parentName:"p"},"Redirect URI")," into the field labeled ",(0,o.kt)("em",{parentName:"p"},"Authorization callback URL"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Github Add Oauth Application Authorization Callback URL",src:n(50338).Z,width:"774",height:"633"})),(0,o.kt)("p",null,"After clicking ",(0,o.kt)("em",{parentName:"p"},"Register application"),", select the ",(0,o.kt)("em",{parentName:"p"},"Generate new client secret")," button."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Github Generate a New Client Secret",src:n(41859).Z,width:"774",height:"192"})),(0,o.kt)("p",null,"Copy the new client secret before navigating away, as GitHub will not display it again."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Github Copy Client Secret",src:n(79818).Z,width:"774",height:"388"})),(0,o.kt)("p",null,"Finally, go back to the admin UI and paste the Client ID and Client Secret values from GitHub into the fields, and select ",(0,o.kt)("em",{parentName:"p"},"Add")," to complete the setup."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Keycloak Add Github Provider Client Secret",src:n(49).Z,width:"1062",height:"586"})),(0,o.kt)("h3",{id:"login-ui"},"Login UI"),(0,o.kt)("p",null,"After setting up one or more social identity providers as above, go back and reload your login screen. You will see that the social logins are automatically displayed as alternative authentication mechanism."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Keycloak Auth Social Login",src:n(82301).Z,width:"548",height:"550"})),(0,o.kt)("p",null,"If you wish to temporarily disable a social provider, you can go into the identity provider configuration and either set ",(0,o.kt)("em",{parentName:"p"},"Enabled")," to ",(0,o.kt)("strong",{parentName:"p"},"OFF")," or set ",(0,o.kt)("em",{parentName:"p"},"Hide on login page")," to ",(0,o.kt)("strong",{parentName:"p"},"ON"),"."),(0,o.kt)("h3",{id:"using-tokens-from-social-providers"},"Using tokens from social providers"),(0,o.kt)("p",null,"In some cases, it is desirable to store the tokens granted to your user so that they can be used for other purposes, such as calling social APIs. Extending the GitHub example above, you may wish to offer your users the ability to manage their GitHub repositories from your application."),(0,o.kt)("p",null,"There are two fields in the identity provider configuration that may be set to facilitate this use case."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"Scopes")," A space-separated list of scopes that are sent when asking for authorization. It usually defaults to only ",(0,o.kt)("inlineCode",{parentName:"li"},"openid"),", which causes the minimum data to be shared when These will be dictated by the social provider. In the GitHub example, you may also want to include ",(0,o.kt)("inlineCode",{parentName:"li"},"repo"),", as a granted token with that scope will be authorized to manage the user's repositories."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"Store tokens")," Enables token storage following authentication.")),(0,o.kt)("p",null,"Once you have set these values, then the token will be available for retrieval. More documentation on using external identity provider tokens can be found in the Keycloak documentation on ",(0,o.kt)("a",{parentName:"p",href:"https://www.keycloak.org/docs/latest/server_admin/#retrieving-external-idp-tokens"},"retrieving external IDP tokens"),"."))}p.isMDXComponent=!0},49:function(e,t,n){t.Z=n.p+"assets/images/auth-social-login-github-client-a6fccc45620d27455d50ad8099774201.png"},79818:function(e,t,n){t.Z=n.p+"assets/images/auth-social-login-github-copy-secret-03ad273b615a8f02462d5ee8c07195b4.png"},41859:function(e,t,n){t.Z=n.p+"assets/images/auth-social-login-github-generate-3f6f3503cd325e3faf86692765523189.png"},50338:function(e,t,n){t.Z=n.p+"assets/images/auth-social-login-github-newapp-4be221fd8744ac1e92612c545b77b636.png"},82301:function(e,t,n){t.Z=n.p+"assets/images/auth-social-login-login-fabee6a17c8552e88344e7a74abaaad2.png"}}]);