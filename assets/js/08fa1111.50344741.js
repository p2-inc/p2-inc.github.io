"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[87436],{19628:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var s=t(75695),i=t(74848),r=t(28453);const o={title:"Run the Keycloak Admin UI Locally (with Phase Two Extensions)",slug:"run-admin-ui",date:new Date("2025-10-14T00:00:00.000Z"),authors:"phasetwo",tags:["phase_two","hosting","open_source","keycloak","admin-ui","docker","extensions","dev-environment","pnpm"],description:"Set up a fast local development environment for the Keycloak Admin UI and point it at a custom Keycloak image\u2014perfect for iterating on extensions like Keycloak Organizations."},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"TL;DR",id:"tldr",level:2},{value:"Why this matters",id:"why-this-matters",level:2},{value:"How the stock setup works (and why we tweak it)",id:"how-the-stock-setup-works-and-why-we-tweak-it",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step-by-step",id:"step-by-step",level:2},{value:"1) Get the right code",id:"1-get-the-right-code",level:3},{value:"2) Swap in the custom start script",id:"2-swap-in-the-custom-start-script",level:3},{value:"3) (If needed) Align the theme output name",id:"3-if-needed-align-the-theme-output-name",level:3},{value:"4) Start the server and the UI",id:"4-start-the-server-and-the-ui",level:3},{value:"Script flags",id:"script-flags",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Developing custom additions to the Keycloak Admin UI can be fiddly and slow. At Phase Two we maintain several ",(0,i.jsx)(n.a,{href:"https://github.com/p2-inc#our-extensions-",children:"popular community extensions"})," that must track frequent Keycloak releases. Below is the approach we use to develop and verify Admin UI changes quickly against a running Keycloak image that includes our extensions."]}),"\n",(0,i.jsx)(n.h2,{id:"tldr",children:"TL;DR"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Clone our Keycloak fork and check out the matching Admin UI branch (e.g., ",(0,i.jsx)(n.code,{children:"26.3.0_orgs_adminui"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"Replace the default server script with our custom one (details below)."}),"\n",(0,i.jsx)(n.li,{children:"Start a Phase Two Keycloak container with the Admin UI in dev mode:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm start --admin-dev --phasetwo --tag=latest\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"In a second terminal, run the Admin UI dev server:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm i && pnpm dev\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"}),". You\u2019ll get auto-refresh and modern DX while the backend runs in Docker."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"why-this-matters",children:"Why this matters"}),"\n",(0,i.jsxs)(n.p,{children:["The Admin UI is the control center for Keycloak. Customizing it is powerful, but it\u2019s tightly coupled to the core codebase and evolves quickly. Running the UI in dev mode against ",(0,i.jsx)(n.strong,{children:"the exact server image"})," you ship (e.g., Phase Two\u2019s extended image) lets you:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Catch breaking changes early when Keycloak releases."}),"\n",(0,i.jsx)(n.li,{children:"Iterate on UI changes instantly (no re-building JARs between edits)."}),"\n",(0,i.jsx)(n.li,{children:"Validate that your extensions render and behave correctly with real data."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Our ",(0,i.jsx)(n.a,{href:"https://github.com/p2-inc/keycloak-orgs",children:"Keycloak Organizations"})," extension, for example, adds new sections to the Admin Console. Each release we re-verify and adjust UI components; this workflow makes that practical."]}),"\n",(0,i.jsx)(n.h2,{id:"how-the-stock-setup-works-and-why-we-tweak-it",children:"How the stock setup works (and why we tweak it)"}),"\n",(0,i.jsxs)(n.p,{children:["Keycloak\u2019s Admin UI is now a library inside the main repo. You can run it locally against a server, but the stock start script pulls the ",(0,i.jsx)(n.strong,{children:"nightly"})," image\u2014great for core dev, not ideal when you need to test against a specific custom image."]}),"\n",(0,i.jsxs)(n.p,{children:["To fix that, we use a small custom start script that runs a ",(0,i.jsx)(n.strong,{children:"Phase Two Keycloak container"})," (or any image\u2014see below) and wires the Admin UI dev server to it."]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Node 20+"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pnpm"})," 9+"]}),"\n",(0,i.jsx)(n.li,{children:"Docker Desktop / Docker 24+"}),"\n",(0,i.jsxs)(n.li,{children:["Ports ",(0,i.jsx)(n.strong,{children:"8080"})," (Keycloak) and ",(0,i.jsx)(n.strong,{children:"5174"})," (Admin UI) free"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-by-step",children:"Step-by-step"}),"\n",(0,i.jsx)(n.h3,{id:"1-get-the-right-code",children:"1) Get the right code"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clone our fork and check out the branch that matches your Keycloak target (we don\u2019t publish a branch for every upstream release):"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# example\ngit clone https://github.com/p2-inc/keycloak.git\ncd keycloak\ngit checkout 26.3.0_orgs_adminui\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Admin UI lives under ",(0,i.jsx)(n.code,{children:"js/apps/admin-ui/"}),". The embedded server project lives under ",(0,i.jsx)(n.code,{children:"js/apps/keycloak-server/"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"2-swap-in-the-custom-start-script",children:"2) Swap in the custom start script"}),"\n",(0,i.jsxs)(n.p,{children:["Copy the contents of ",(0,i.jsx)(n.code,{children:"js/apps/admin-ui/src/phaseII/start-server-custom.js"})," into ",(0,i.jsx)(n.code,{children:"js/apps/keycloak-server/scripts/start-server.js"})," ",(0,i.jsx)(n.strong,{children:"replacing its contents"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["The custom script adds flags like ",(0,i.jsx)(n.code,{children:"--phasetwo"})," and ",(0,i.jsx)(n.code,{children:"--tag"})," and starts ",(0,i.jsx)(n.code,{children:"quay.io/phasetwo/phasetwo-keycloak:<tag>"})," via Docker with the right dev env vars."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-if-needed-align-the-theme-output-name",children:"3) (If needed) Align the theme output name"}),"\n",(0,i.jsxs)(n.p,{children:["Our Admin UI build emits a theme named ",(0,i.jsx)(n.code,{children:"phasetwo.v2"}),". If your environment expects ",(0,i.jsx)(n.code,{children:"keycloak.v2"}),", either:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Duplicate the folder ",(0,i.jsx)(n.code,{children:"theme/phasetwo.v2"})," and name it ",(0,i.jsx)(n.code,{children:"keycloak.v2"}),", ",(0,i.jsx)(n.strong,{children:"or"})]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:"vite.config.ts"})," to output to ",(0,i.jsx)(n.code,{children:"phasetwo.v2"})," and keep the server pointed at that name."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"4-start-the-server-and-the-ui",children:"4) Start the server and the UI"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Start the server container + wire the UI dev endpoints:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd js/apps/keycloak-server\npnpm start --admin-dev --phasetwo --tag=latest\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In another terminal, start the Admin UI dev server:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ../admin-ui\npnpm i\npnpm dev\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now open ",(0,i.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"script-flags",children:"Script flags"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Flag"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"What it does"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--local"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsxs)(n.td,{children:["Use a local Quarkus dist (",(0,i.jsx)(n.code,{children:"keycloak-999.0.0-SNAPSHOT.tar.gz"}),") instead of Docker."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--account-dev"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsxs)(n.td,{children:["Points Account app to ",(0,i.jsx)(n.code,{children:"http://localhost:5173"})," for dev."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--admin-dev"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsxs)(n.td,{children:["Points Admin app to ",(0,i.jsx)(n.code,{children:"http://localhost:5174"})," for dev (use this tutorial)."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--phasetwo"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsxs)(n.td,{children:["Run ",(0,i.jsx)(n.code,{children:"quay.io/phasetwo/phasetwo-keycloak"})," in Docker with dev-friendly flags."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"--tag=<tag>"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsxs)(n.td,{children:["Image tag to run (defaults to ",(0,i.jsx)(n.code,{children:"latest"}),")."]})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Under the hood we enable features required by our extensions: ",(0,i.jsx)(n.code,{children:"login:v2, account:v3, admin-fine-grained-authz:v2, transient-users, organization, oid4vc-vci, declarative-ui, quick-theme"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Port 8080 already in use"})," \u2013 Stop other Keycloak/containers or change the published port."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"White screen / 404s in the Admin UI"})," \u2013 Make sure ",(0,i.jsx)(n.code,{children:"--admin-dev"})," is set and the dev server is running on ",(0,i.jsx)(n.code,{children:"5174"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Missing strings/components"})," \u2013 Verify you\u2019re on the matching Admin UI branch for your Keycloak version."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Theme not loading"})," \u2013 Ensure the output theme name (",(0,i.jsx)(n.code,{children:"phasetwo.v2"})," vs ",(0,i.jsx)(n.code,{children:"keycloak.v2"}),") matches what the server expects."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cannot pull image"})," \u2013 Confirm Docker can access ",(0,i.jsx)(n.code,{children:"quay.io"})," and that the tag exists."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(n.p,{children:["This workflow keeps the Admin UI dev loop fast while staying faithful to the image you deploy. Although we demonstrate with Phase Two\u2019s image, the same pattern works with any Keycloak distribution. If this saved you time, drop us a star \u2b50\ufe0f on ",(0,i.jsx)(n.a,{href:"https://github.com/p2-inc",children:"GitHub"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["Want to learn more? Log in to the ",(0,i.jsx)(n.a,{href:"https://dash.phasetwo.io",children:"Phase Two Dash"})," and try uploading your first resource today. This feature is included with all ",(0,i.jsx)(n.strong,{children:"dedicated cluster plans"}),". For questions, reach out to ",(0,i.jsx)(n.a,{href:"mailto:support@phasetwo.io",children:"support@phasetwo.io"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},75695:e=>{e.exports=JSON.parse('{"permalink":"/blog/run-admin-ui","source":"@site/blog/2025-10-14-run-admin-ui.md","title":"Run the Keycloak Admin UI Locally (with Phase Two Extensions)","description":"Set up a fast local development environment for the Keycloak Admin UI and point it at a custom Keycloak image\u2014perfect for iterating on extensions like Keycloak Organizations.","date":"2025-10-14T00:00:00.000Z","tags":[{"inline":true,"label":"phase_two","permalink":"/blog/tags/phase-two"},{"inline":true,"label":"hosting","permalink":"/blog/tags/hosting"},{"inline":true,"label":"open_source","permalink":"/blog/tags/open-source"},{"inline":true,"label":"keycloak","permalink":"/blog/tags/keycloak"},{"inline":true,"label":"admin-ui","permalink":"/blog/tags/admin-ui"},{"inline":true,"label":"docker","permalink":"/blog/tags/docker"},{"inline":true,"label":"extensions","permalink":"/blog/tags/extensions"},{"inline":true,"label":"dev-environment","permalink":"/blog/tags/dev-environment"},{"inline":true,"label":"pnpm","permalink":"/blog/tags/pnpm"}],"readingTime":4.18,"hasTruncateMarker":true,"authors":[{"name":"Phase Two","title":"Hosted Keycloak and Keycloak Support","url":"https://github.com/p2-inc","email":"support@phasetwo.io","imageURL":"https://avatars.githubusercontent.com/u/60152109?s=200&v=4","key":"phasetwo","page":null}],"frontMatter":{"title":"Run the Keycloak Admin UI Locally (with Phase Two Extensions)","slug":"run-admin-ui","date":"2025-10-14T00:00:00.000Z","authors":"phasetwo","tags":["phase_two","hosting","open_source","keycloak","admin-ui","docker","extensions","dev-environment","pnpm"],"description":"Set up a fast local development environment for the Keycloak Admin UI and point it at a custom Keycloak image\u2014perfect for iterating on extensions like Keycloak Organizations."},"unlisted":false,"prevItem":{"title":"Auth.it featured on Keycloak Friday Chat","permalink":"/blog/authit-on-kfc"},"nextItem":{"title":"Phase Two Releases Self Service Resource Management","permalink":"/blog/self-service-resource-management"}}')}}]);