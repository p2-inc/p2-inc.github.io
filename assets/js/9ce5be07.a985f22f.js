"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[2798],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(f,i(i({ref:t},s),{},{components:n})):a.createElement(f,i({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},87304:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return i},default:function(){return u},frontMatter:function(){return o},metadata:function(){return l},toc:function(){return c}});var a=n(83117),r=(n(67294),n(3905));const o={id:"sample",title:"Sample Application"},i=void 0,l={unversionedId:"getting-started/sample",id:"getting-started/sample",title:"Sample Application",description:"Most users will want to get started quickly with a sample of how to secure an application. Once you have registered for a Phase Two account, you can clone our demo app repository to see a demonstration of authentication in action.",source:"@site/docs/getting-started/sample.md",sourceDirName:"getting-started",slug:"/getting-started/sample",permalink:"/docs/getting-started/sample",draft:!1,editUrl:"https://github.com/p2-inc/phasetwo-docs/tree/master/docs/getting-started/sample.md",tags:[],version:"current",frontMatter:{id:"sample",title:"Sample Application"},sidebar:"docs",previous:{title:"Configuration",permalink:"/docs/getting-started/configuration"},next:{title:"Customizing UI",permalink:"/docs/getting-started/customizing-ui"}},p={},c=[{value:"Client setup",id:"client-setup",level:3},{value:"Sample configuration",id:"sample-configuration",level:3}],s={toc:c};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Most users will want to get started quickly with a sample of how to secure an application. Once you have registered for a Phase Two account, you can clone our demo app repository to see a demonstration of authentication in action."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/p2-inc/debug-app"},"https://github.com/p2-inc/debug-app")),(0,r.kt)("h3",{id:"client-setup"},"Client setup"),(0,r.kt)("p",null,'Before you configure and start the sample application, you must build a Client configuration. In Keycloak, a "Client" is synonymous with an application you are securing.'),(0,r.kt)("p",null,"Log into your Keycloak realm, and click on ",(0,r.kt)("strong",{parentName:"p"},"Clients")," in the left navigation, and click ",(0,r.kt)("em",{parentName:"p"},"Create client"),". "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Enter ",(0,r.kt)("inlineCode",{parentName:"li"},"frontend")," as the ",(0,r.kt)("strong",{parentName:"li"},"Client ID")," and click ",(0,r.kt)("em",{parentName:"li"},"Next")," (you can name this whatever you want)"),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Capability config")," screen, keep the defaults and click ",(0,r.kt)("em",{parentName:"li"},"Save")),(0,r.kt)("li",{parentName:"ol"},"In the ",(0,r.kt)("strong",{parentName:"li"},"Access settings")," screen, enter the following values:",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"http://localhost:3001/*")," for ",(0,r.kt)("strong",{parentName:"li"},"Valid redirect URIs")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," in ",(0,r.kt)("strong",{parentName:"li"},"Valid post logout redirect URIs")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"+")," in ",(0,r.kt)("strong",{parentName:"li"},"Web origins")))),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("em",{parentName:"li"},"Save")),(0,r.kt)("li",{parentName:"ol"},"In the upper right corner, open the ",(0,r.kt)("strong",{parentName:"li"},"Action")," menu and select ",(0,r.kt)("strong",{parentName:"li"},"Download adapter config"),". Click ",(0,r.kt)("em",{parentName:"li"},"Download")," and save the file for the next step.")),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(7102).Z,width:"1102",height:"1106"})),(0,r.kt)("h3",{id:"sample-configuration"},"Sample configuration"),(0,r.kt)("p",null,"Clone that repo to your local machine. You'll find the applications in the ",(0,r.kt)("inlineCode",{parentName:"p"},"frontend")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"backend")," directory, and a set of supporting files for configuration and deployment."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/p2-inc/debug-app.git\ncd debug-app/frontend\n")),(0,r.kt)("p",null,"Once you have cloned the repo, edit the ",(0,r.kt)("inlineCode",{parentName:"p"},"keycloak.json")," file and switch it with the configuration you downloaded at the end of the Client setup. It should look something like this (you'll need to replace the values in curly braces)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "realm": "{realm}",\n  "auth-server-url": "https://{host}/auth/",\n  "ssl-required": "external",\n  "resource": "frontend",\n  "public-client": true,\n  "confidential-port": 0\n}\n')),(0,r.kt)("p",null,"Then run the server using the included script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./start.sh\n")),(0,r.kt)("p",null,"And open ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:3001/"},"http://localhost:3001/"),' in your browser. Once you have logged in, you\'ll see some information about the user that is contained the "access token" (more about that later).'),(0,r.kt)("p",null,"Curious how it works? Most of the functionality for quickly securing an app is contained in ",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),". More detailed information is contained in the next section, dedicated to securing applications."))}u.isMDXComponent=!0},7102:function(e,t,n){t.Z=n.p+"assets/images/2022-10-17-client-setup-206620dc405420cabc1b0eb5e7866844.png"}}]);