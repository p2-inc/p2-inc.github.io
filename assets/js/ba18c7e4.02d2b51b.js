"use strict";(globalThis.webpackChunkphasetwo_docs=globalThis.webpackChunkphasetwo_docs||[]).push([[55666],{49531(e,t,i){i.d(t,{R:()=>s,x:()=>r});var a=i(30758);const n={},o=a.createContext(n);function s(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),a.createElement(o.Provider,{value:t},e.children)}},82918(e,t,i){i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"securing-applications/native-apps","title":"Native Applications - iOS, Android, and macOS","description":"Native applications are applications that are installed on a device, such as a mobile phone or desktop computer. Integrating an authentication system into a native application can be more complex than integrating it into a web application, due to the need to handle authentication flows and token management on the client side.","source":"@site/docs/securing-applications/native-apps.md","sourceDirName":"securing-applications","slug":"/securing-applications/native-apps","permalink":"/docs/securing-applications/native-apps","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/securing-applications/native-apps.md","tags":[],"version":"current","frontMatter":{"id":"native-apps","title":"Native Applications - iOS, Android, and macOS"},"sidebar":"docs","previous":{"title":"Django","permalink":"/docs/securing-applications/django"},"next":{"title":"SpringBoot","permalink":"/docs/securing-applications/springboot"}}');var n=i(86070),o=i(49531);const s={id:"native-apps",title:"Native Applications - iOS, Android, and macOS"},r=void 0,c={},l=[{value:"Setting up a Keycloak Client for a Native Application",id:"setting-up-a-keycloak-client-for-a-native-application",level:3}];function p(e){const t={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/G3Mgh_h9cNU?si=GnmCRi2Hqt7M-Bq6",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,n.jsx)(t.p,{children:"Native applications are applications that are installed on a device, such as a mobile phone or desktop computer. Integrating an authentication system into a native application can be more complex than integrating it into a web application, due to the need to handle authentication flows and token management on the client side."}),"\n",(0,n.jsxs)(t.p,{children:['The first thing to know is that Keycloak 100% supports native applications. Just like any other "Client" in Keycloak, you can create a Client for your native application and configure it to use the appropriate authentication flow. However, what is important to know is that doing a fully native integration is very difficult. The recommended way with the least amount of friction, is to use the ',(0,n.jsx)(t.a,{href:"https://appauth.io/",children:"AppAuth library"})," which supports Android, iOS, and macOS."]}),"\n",(0,n.jsx)(t.p,{children:"The experience when using AppAuth is that your users will be redirected to the browser to sign in, and then redirected back to the app. This is a much easier experience to implement than trying to do a fully native experience. This is handled by a webview within the app. It looks like a window slides in or up, can be configured to be full screen, and then slides back out when the user is done signing in. This is a much easier experience to implement than trying to do a fully native experience."}),"\n",(0,n.jsx)(t.p,{children:"The reason to use the library, is that Keycloak does not have a native SDK for iOS, Android, or macOS. It would require a significant amount of work to replicate all the flows required to do a fully native experience. As an example, if you wanted to have a passcode 2fa, or a TOTP 2fa, you would need to implement that logic yourself. With the AppAuth library, you can leverage the existing flows that Keycloak has built-in, and you can also leverage the existing flows that Keycloak has built-in for 2fa. The implementation time is significantly reduced by using the library, and you can still provide a great user experience. Many companies use this approach for their native applications and it is both secure and user friendly."}),"\n",(0,n.jsx)(t.p,{children:"To get started, you can follow the documentation for the AppAuth library for your specific platform. You will need to configure your Keycloak Client to use the appropriate authentication flow, and then you can use the library to handle the authentication flow in your app."}),"\n",(0,n.jsx)(t.h3,{id:"setting-up-a-keycloak-client-for-a-native-application",children:"Setting up a Keycloak Client for a Native Application"}),"\n",(0,n.jsxs)(t.p,{children:['When setting up a Keycloak Client for a native application, you will need to configure the Client to use the appropriate authentication flow. This typically involves setting the Authentication flow to "Standard Flow". You will also need to configure the "Valid Redirect URIs" to include the URI that your app will use to redirect back after authentication. This is typically a custom URI scheme that you define for your app, such as ',(0,n.jsx)(t.code,{children:"myapp://callback"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["You may also wish to apply a specific theme to this client to match the look and feel of your app. It is common for native apps to lack a header and footer often seen on web apps. To do this, you can create a ",(0,n.jsx)(t.a,{href:"/docs/getting-started/customizing-ui/",children:"custom theme"}),' in Keycloak and then apply that theme to your Client. Using Keycloakify allows you to create a "variant" that can quickly hide your header and footer.']}),"\n",(0,n.jsx)(t.p,{children:"In the AppAuth iOS example, here are a set of the changes you would need to make:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:'static NSString *const kRedirectURI = @"io.phasetwo.appauth:/oauth2redirect/keycloak";  // This is the redirect URI you will use to interact with the AppAuth library. This is linked to the URL Scheme.\nstatic NSString *const kClientID = @"AppAuth-iOS-Example"; // This is the Client ID you set in Keycloak when you created the Client for your native app.\nstatic NSString *const kIssuer = @"https://phasetwo.us-west-2.aws.auth.ac/realms/merman"; // Full URL to your Keycloak realm. \n'})}),"\n",(0,n.jsxs)(t.p,{children:["URL Scheme for this would be: ",(0,n.jsx)(t.code,{children:"io.phasetwo.appauth"})]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}}}]);