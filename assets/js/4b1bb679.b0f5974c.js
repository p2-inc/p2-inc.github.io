"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[26960],{13077:(e,s,r)=>{r.d(s,{A:()=>t});const t=r.p+"assets/images/dash-create-premium-cluster-2e95b870115e27d2d716cd1d7934e7bc.png"},24670:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"self-service/dedicated-clusters","title":"Dedicated Clusters","description":"Dedicated clusters are available with paid plans. These Clusters use isolated compute, network and storage resources. Customers using dedicated clusters can create up to 20 Realms per cluster. If you need more, please contact your account representative or email support@phasetwo.io.","source":"@site/docs/self-service/dedicated-clusters.md","sourceDirName":"self-service","slug":"/self-service/dedicated-clusters","permalink":"/docs/self-service/dedicated-clusters","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/self-service/dedicated-clusters.md","tags":[],"version":"current","frontMatter":{"id":"dedicated-clusters","title":"Dedicated Clusters"},"sidebar":"docs","previous":{"title":"Realms (Deployments)","permalink":"/docs/self-service/deployments"},"next":{"title":"Teams (Organizations)","permalink":"/docs/self-service/your-organization"}}');var i=r(74848),n=r(28453);const o={id:"dedicated-clusters",title:"Dedicated Clusters"},a=void 0,l={},c=[{value:"Creating a Cluster",id:"creating-a-cluster",level:2},{value:"Regions",id:"regions",level:2},{value:"Global clusters",id:"global-clusters",level:3},{value:"Custom domains",id:"custom-domains",level:2},{value:"Cluster Resources: Themes and Extensions",id:"cluster-resources-themes-and-extensions",level:2},{value:"Uploading a Theme or Extension",id:"uploading-a-theme-or-extension",level:3},{value:"Managing Resources",id:"managing-resources",level:3},{value:"Migrating from a shared deployment",id:"migrating-from-a-shared-deployment",level:2},{value:"Using a Cluster",id:"using-a-cluster",level:2},{value:"Creating Deployments in your Cluster",id:"creating-deployments-in-your-cluster",level:2},{value:"Billing",id:"billing",level:2},{value:"Deleting a Cluster",id:"deleting-a-cluster",level:2},{value:"Refunds",id:"refunds",level:2},{value:"SLA",id:"sla",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["Dedicated clusters are available with paid plans. These Clusters use isolated compute, network and storage resources. Customers using dedicated clusters can create up to 20 Realms per cluster. If you need more, please contact your account representative or email ",(0,i.jsx)(s.a,{href:"mailto:support@phasetwo.io",children:"support@phasetwo.io"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["For more information view the ",(0,i.jsx)(s.a,{href:"/hosting",children:"Hosting"})," and ",(0,i.jsx)(s.a,{href:"/pricing",children:"Pricing"})," pages."]}),"\n",(0,i.jsx)(s.h2,{id:"creating-a-cluster",children:"Creating a Cluster"}),"\n",(0,i.jsx)(s.p,{children:"Creating a new cluster can be started in a couple of ways:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Visit the ",(0,i.jsx)(s.a,{href:"https://dash.phasetwo.io/clusters/create",children:"create cluster link"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["From the ",(0,i.jsx)(s.a,{href:"https://dash.phasetwo.io/",children:"Overview page"})," and the ",(0,i.jsx)(s.a,{href:"https://dash.phasetwo.io/clusters/",children:"Clusters page"}),", click ",(0,i.jsx)(s.strong,{children:"Create Cluster"})," in the top right."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["At this time, only a Premium cluster can be created via self-serve, for Enterprise clusters, please contact ",(0,i.jsx)(s.a,{href:"mailto:sales@phasetwo.io",children:"sales@phasetwo.io"}),". We will be releasing the ability to create Enterprise clusters very soon."]}),"\n",(0,i.jsx)(s.p,{children:"You must select a region, select an owning organization, and input a name to identify the cluster, and optionally provide a domain name you wish to use. Choose between Annual or Monthly billing."}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Keycloak Phase Two Dedicated Cluster Creation",src:r(13077).A+"",width:"2382",height:"1564"})}),"\n",(0,i.jsxs)(s.p,{children:["Once you have input the required information, you will be sent to ",(0,i.jsx)(s.a,{href:"https://stripe.com",children:"Stripe"}),", our payment partner, to set up your billing account and payment method."]}),"\n",(0,i.jsxs)(s.p,{children:["Following successful billing setup, you will be returned to the ",(0,i.jsx)(s.a,{href:"https://dash.phasetwo.io/clusters",children:"Clusters view"})," while your Cluster is provisioned. This is usually fast, but can take up to 24 hours in some cases. You will be notified by email and in the ",(0,i.jsx)(s.a,{href:"https://dash.phasetwo.io/clusters",children:"Clusters view"})," when the Cluster is live."]}),"\n",(0,i.jsx)("img",{src:"/docs/dash-cluster-card.png",alt:"Keycloak Phase Two Dedicated Cluster Card",style:{width:"40%",borderRadius:"8px"}}),"\n",(0,i.jsx)(s.h2,{id:"regions",children:"Regions"}),"\n",(0,i.jsx)(s.p,{children:"Dedicated clusters are currently available in the following regions using the self-service dashboard:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["AWS US East (N. Virginia) ",(0,i.jsx)(s.code,{children:"us-east-1"})]}),"\n",(0,i.jsxs)(s.li,{children:["AWS US West (Oregon) ",(0,i.jsx)(s.code,{children:"us-west-2"})]}),"\n",(0,i.jsxs)(s.li,{children:["AWS Europe (Frankfurt) ",(0,i.jsx)(s.code,{children:"eu-central-1"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If you wish to launch a dedicated cluster in one of the following regions, we can provision it for you with an additional monthly fee. Please contact ",(0,i.jsx)(s.a,{href:"mailto:sales@phasetwo.io",children:"sales@phasetwo.io"})," for more information."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["AWS Asia-Pacific (Mumbai) ",(0,i.jsx)(s.code,{children:"ap-south-1"})]}),"\n",(0,i.jsxs)(s.li,{children:["AWS Asia-Pacific (Singapore) ",(0,i.jsx)(s.code,{children:"ap-southeast-1"})]}),"\n",(0,i.jsxs)(s.li,{children:["AWS Europe (Ireland) ",(0,i.jsx)(s.code,{children:"eu-west-1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP Asia-Pacific (Jurong West) ",(0,i.jsx)(s.code,{children:"asia-southeast1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP Europe (St. Ghislain) ",(0,i.jsx)(s.code,{children:"europe-west1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP South America (S\xe3o Paulo) ",(0,i.jsx)(s.code,{children:"southamerica-east1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP US Central (Iowa) ",(0,i.jsx)(s.code,{children:"us-central1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP US East (South Carolina) ",(0,i.jsx)(s.code,{children:"us-east1"})]}),"\n",(0,i.jsxs)(s.li,{children:["GCP US West (California) ",(0,i.jsx)(s.code,{children:"us-west2"})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"global-clusters",children:"Global clusters"}),"\n",(0,i.jsxs)(s.p,{children:["For use cases that require global proximity to users and region failover behavior, we are currently in ",(0,i.jsx)(s.em,{children:"beta"})," for our global clusters. Global server load balancing provides geographic region affinity and failover to connect your users with the closest, available instances."]}),"\n",(0,i.jsxs)(s.p,{children:["These clusters are backed by ",(0,i.jsx)(s.a,{href:"https://www.cockroachlabs.com/",children:"CockroachDB"})," multi-region clusters, which are hosted and operated by Cockroach Labs. There are two price tiers for global clusters, depending on your use of our shared CockroachDB clusters, or your own dedicated clusters."]}),"\n",(0,i.jsxs)(s.p,{children:["Please contact ",(0,i.jsx)(s.a,{href:"mailto:sales@phasetwo.io",children:"sales@phasetwo.io"})," to talk to us about your global cluster use case."]}),"\n",(0,i.jsx)(s.h2,{id:"custom-domains",children:"Custom domains"}),"\n",(0,i.jsx)(s.p,{children:"Support for custom domains is available for all cloud providers. In order to set up a custom domain that you already own, specify the desired domain when creating the cluster or visit the cluster config page for that specific cluster. Go to the Domains tab and add your desired domain."}),"\n",(0,i.jsx)(s.p,{children:"Following addition of the domain and setup of your cluster, you will need to create 2 DNS records."}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Validation record for certificates"}),"\n",(0,i.jsx)(s.li,{children:"Vanity record for your desired domain."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"For all cloud providers use the following format for the vanity:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Premium: CNAME ",(0,i.jsx)(s.code,{children:"yourdomain.com"})," TO ",(0,i.jsx)(s.code,{children:"{cluster_name}.{region}.{cloud_provider}.auth.ac"})]}),"\n",(0,i.jsxs)(s.li,{children:["Enterprise: CNAME ",(0,i.jsx)(s.code,{children:"yourdomain.com"})," TO ",(0,i.jsx)(s.code,{children:"{cluster_name}.{region}.{cloud_provider}.global.auth.ac"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"If your validation times out, remove the record and re-add it. Values should remain the same so you will not have to update DNS a second time."}),"\n",(0,i.jsx)("img",{src:"/docs/dash-cname-validated.png",alt:"Validated CNAME",style:{width:"60%",borderRadius:"8px"}}),"\n",(0,i.jsx)("img",{src:"/docs/dash-cname-pending-validation.png",alt:"Pending Validation CNAME",style:{width:"60%",borderRadius:"8px"}}),"\n",(0,i.jsx)(s.p,{children:"Your cluster will be available from your custom domain within 24 hours of correct configuration of the DNS records."}),"\n",(0,i.jsx)(s.h2,{id:"cluster-resources-themes-and-extensions",children:"Cluster Resources: Themes and Extensions"}),"\n",(0,i.jsx)(s.p,{children:"Resources, like a theme or extension, can be uploaded to your cluster for deployment to any Realm (deployment) in that cluster."}),"\n",(0,i.jsx)(s.p,{children:"Note: Premium clusters are limited to a single theme resource and no extensions. Enterprise clusters can have multiple themes and extensions."}),"\n",(0,i.jsx)("img",{src:"/docs/resources/resources-overview.png",alt:"Resources Overview",style:{width:"100%",borderRadius:"8px"}}),"\n",(0,i.jsx)(s.h3,{id:"uploading-a-theme-or-extension",children:"Uploading a Theme or Extension"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Start by visiting the ",(0,i.jsx)(s.code,{children:"Cluster > Config > Resources tab"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If you have not already done so, create a ",(0,i.jsx)(s.code,{children:"Resource"}),". A resource is a named entity that allows your upload the theme or extension for a specific Keycloak version. Give the name of the resource something recognizable, like ",(0,i.jsx)(s.code,{children:"theme-customer-1-0-0"}),"."]}),"\n",(0,i.jsx)("img",{src:"/docs/resources/resources-add-new.png",alt:"Resources Add New",style:{width:"60%",borderRadius:"8px"}}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"After the resource is created, you can upload the theme or extension. Activate a specific version, say Keycloak 26 (only major versions are supported) and then click the upload icon. Select your file and upload it. The file must be a .jar file."}),"\n",(0,i.jsx)("img",{src:"/docs/resources/resources-upload.png",alt:"Resources Upload",style:{width:"60%",borderRadius:"8px"}}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["After the upload is complete, your resource is ready to be deployed to your cluster. Click the ",(0,i.jsx)(s.code,{children:"Update Resources on Cluster"})," button to alert Phase Two staff to trigger loading this resource. Due to the way Keycloak manages themes and extensions, this requires are restart of your cluster (usually a zero-downtime operation). Keycloak staff review all resources before applying them to a cluster to ensure uptime and functionality."]}),"\n",(0,i.jsx)("img",{src:"/docs/resources/resources-update-cluster.png",alt:"Resources Update Cluster",style:{width:"60%",borderRadius:"8px"}}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"After the cluster has been restarted, you can visit your Realm (deployment) and select the theme for use. If using an extension, then you will need to configure the extension in your Realm based on the operation of the extension."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"managing-resources",children:"Managing Resources"}),"\n",(0,i.jsx)(s.p,{children:"You can disable or enable resources using the power icon in the card. This will activate or deactivate the resource on the cluster. You can remove the resource entirely from your cluster using the trash icon. Disabling is a good way to temporarily remove a resource without deleting it."}),"\n",(0,i.jsx)("img",{src:"/docs/resources/resources-manage.png",alt:"Resources Manage",style:{width:"60%",borderRadius:"8px"}}),"\n",(0,i.jsx)(s.h2,{id:"migrating-from-a-shared-deployment",children:"Migrating from a shared deployment"}),"\n",(0,i.jsxs)(s.p,{children:["If you currently have a free, shared deployment, and you would like to migrate that deployment into your dedicated cluster, this can be done in a one-time operation. This is a batch operation, and will require 24 hours to process, so immediate migrations are not available. Please contact your customer success representative at ",(0,i.jsx)(s.a,{href:"mailto:support@phasetwo.io",children:"support@phasetwo.io"})," and indicate the deployment name you want to migrate, the target cluster, and the time you want to initiate the migration."]}),"\n",(0,i.jsx)(s.h2,{id:"using-a-cluster",children:"Using a Cluster"}),"\n",(0,i.jsx)(s.p,{children:"Clusters are used much the same as our shared deployments. You can create up to 20 Realms per cluster."}),"\n",(0,i.jsx)(s.h2,{id:"creating-deployments-in-your-cluster",children:"Creating Deployments in your Cluster"}),"\n",(0,i.jsxs)(s.p,{children:["Once your Cluster has been provisioned, you can create Deployments as before, but you will open the create Deployment modal from the Cluster. Access to the admin console for those Realms is the same, using the ",(0,i.jsx)(s.em,{children:"Open Console"})," link next to each Deployment."]}),"\n",(0,i.jsx)(s.h2,{id:"billing",children:"Billing"}),"\n",(0,i.jsxs)(s.p,{children:["Access to invoices and ability to change payment information can be accessed in the action menu next to the Cluster. This will take you to ",(0,i.jsx)(s.a,{href:"https://stripe.com",children:"Stripe"}),", our payment partner, to access your billing history and update your payment information. This is restricted to users with the appropriate organization roles."]}),"\n",(0,i.jsx)(s.h2,{id:"deleting-a-cluster",children:"Deleting a Cluster"}),"\n",(0,i.jsx)(s.p,{children:"Clusters that have reached the provisioing or active state cannot be immediately deleted. If you wish to delete your Cluster and end your subscription, you can schedule the deletion. Your cluster will be available until the end of your montly billing period. At that point, there will begin a 7-day grace period where the cluster will be available, and a 14-day grace period where the data will be preserved. Following that, the cluster will be de-provisioned and all data will be purged from our systems for security and compliance reasons."}),"\n",(0,i.jsx)(s.h2,{id:"refunds",children:"Refunds"}),"\n",(0,i.jsx)(s.p,{children:"There are no refunds available for subscriptions paid on a monthly basis."}),"\n",(0,i.jsx)(s.p,{children:"If you have paid annually, and you have more than one month left in your subscription period, you will be refunded a pro-rated amount following the end of the 14-day grace period. This refund will come through your payment method registered with Stripe."}),"\n",(0,i.jsx)(s.h2,{id:"sla",children:"SLA"}),"\n",(0,i.jsxs)(s.p,{children:["Please refer to our ",(0,i.jsx)(s.a,{href:"/company/sla",children:"Service Level Agreement"})," for more information."]})]})}function u(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>a});var t=r(96540);const i={},n=t.createContext(i);function o(e){const s=t.useContext(n);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(n.Provider,{value:s},e.children)}}}]);