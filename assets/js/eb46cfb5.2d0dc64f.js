"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[648],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var t=s(96540);const o={},i=t.createContext(o);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},46409:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/self-service-deployments-console-link-ccba6c721abebddbec6ec3a6db7df90c.png"},55902:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"self-service/deployments","title":"Deployments","description":"A Deployment is a Phase Two hosted instance of a Realm in a Phase Two enhanced Keycloak cluster. These clusters can be shared with other customers, or dedicated for customers in paid plans. Free, shared plans are allowed one Deployment per customer, and dedicated plans can create up to 20 Realms per cluster.","source":"@site/docs/self-service/deployments.md","sourceDirName":"self-service","slug":"/self-service/deployments","permalink":"/docs/self-service/deployments","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/self-service/deployments.md","tags":[],"version":"current","frontMatter":{"id":"deployments","title":"Deployments"},"sidebar":"docs","previous":{"title":"Self-service","permalink":"/docs/self-service/"},"next":{"title":"Dedicated Clusters","permalink":"/docs/self-service/dedicated-clusters"}}');var o=s(74848),i=s(28453);const a={id:"deployments",title:"Deployments"},c=void 0,l={},r=[{value:"Regions",id:"regions",level:3},{value:"Creating a Deployment",id:"creating-a-deployment",level:3},{value:"Opening the console",id:"opening-the-console",level:3},{value:"Issues with access to the Admin Console",id:"issues-with-access-to-the-admin-console",level:3},{value:"Direct Admin Console URL",id:"direct-admin-console-url",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"A Deployment is a Phase Two hosted instance of a Realm in a Phase Two enhanced Keycloak cluster. These clusters can be shared with other customers, or dedicated for customers in paid plans. Free, shared plans are allowed one Deployment per customer, and dedicated plans can create up to 20 Realms per cluster."}),"\n",(0,o.jsx)(n.h3,{id:"regions",children:"Regions"}),"\n",(0,o.jsx)(n.p,{children:"Shared clusters are currently operating in the following regions:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["AWS US West (Oregon) ",(0,o.jsx)(n.code,{children:"us-west-2"})]}),"\n",(0,o.jsxs)(n.li,{children:["AWS Europe (Frankfurt) ",(0,o.jsx)(n.code,{children:"eu-central-1"})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Dedicated clusters can be launched in most AWS or GCP regions by request."}),"\n",(0,o.jsx)(n.h3,{id:"creating-a-deployment",children:"Creating a Deployment"}),"\n",(0,o.jsxs)(n.p,{children:["Once you have logged in the self-service tool, click on the ",(0,o.jsx)(n.strong,{children:"Deployments"})," menu item and select the ",(0,o.jsx)(n.strong,{children:"Create Deployment"})," button. You must input a name, choose a region, and (optionally) select a cluster if you are creating a Deployment in a dedicated cluster."]}),"\n",(0,o.jsx)(n.h3,{id:"opening-the-console",children:"Opening the console"}),"\n",(0,o.jsxs)(n.p,{children:["Next to active Deployments in the list, you can select the ",(0,o.jsx)(n.strong,{children:"Open Console"})," link to create a login link and open it in another browser window."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Phase Two Self Service Open Console Link",src:s(46409).A+"",width:"907",height:"147"})}),"\n",(0,o.jsx)(n.h3,{id:"issues-with-access-to-the-admin-console",children:"Issues with access to the Admin Console"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"The Open Console link doesn't work"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Access to the Admin Console using the ",(0,o.jsx)(n.em,{children:"Open Console"})," link requires your Deployment Realm to have a user with the username ",(0,o.jsx)(n.code,{children:"admin"}),", which is automatically created when the Deployment is provisioned. In order to maintain access using this mechanism, you ",(0,o.jsx)(n.strong,{children:"must not"})," change this username or its role mappings. Sometimes, if you have ",(0,o.jsx)(n.em,{children:"Email as username"})," set in your Realm, you might inadvertently change the username by changing the email. If you have lost access and need us to restore the admin account, please email ",(0,o.jsx)(n.a,{href:"mailto:support@phasetwo.io",children:"support@phasetwo.io"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["You can also create a backup account to access your Deployment directly. Create an account with all ",(0,o.jsx)(n.code,{children:"realm-management"})," Client Roles assigned, and you will be able to log in and use the direct link to the Admin Console below. You can also create admin accounts that are assigned restricted permissions (e.g. only managing users) by selecting a subset of the ",(0,o.jsx)(n.code,{children:"realm-management"})," Client Roles."]}),"\n",(0,o.jsx)(n.h4,{id:"direct-admin-console-url",children:"Direct Admin Console URL"}),"\n",(0,o.jsx)(n.p,{children:"You may choose to access the Admin Console directly for users with admin roles. Construct the URL as below:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"https://{cluster-host}/auth/admin/{realm-name}/console\n\n- cluster-host: The hostname of the Cluster (shared or dedicated)\n- realm-name: The name of the Deployment\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"I've lost access to the Admin Console!"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In addition to the above issue with removing the ",(0,o.jsx)(n.code,{children:"admin"})," account, another restriction is that you cannot change the name of your Deployment in the ",(0,o.jsx)(n.em,{children:"Realm Settings"})," of the Account Console. While it is technically supported in Keycloak, it can produce problems, and causes the metadata we use to log you in from the dashboard to be inaccurate. Because of this, we do not support changing Deployment names after they are created. If you need to change the name, you can delete your Deployment and create a new one."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);