"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[50648],{28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var a=n(96540);const t={},l=a.createContext(t);function r(e){const s=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(l.Provider,{value:s},e.children)}},49767:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"self-service/deployments","title":"Realms (Deployments)","description":"A Deployment is a Phase Two hosted instance of a Keycloak Realm in a Phase Two enhanced Keycloak cluster. These clusters can be shared with other customers, or dedicated for customers in paid plans. Free, shared plans are allowed one Deployment per customer, and dedicated plans can create up to 20 Realms per cluster.","source":"@site/docs/self-service/deployments.md","sourceDirName":"self-service","slug":"/self-service/deployments","permalink":"/docs/self-service/deployments","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/self-service/deployments.md","tags":[],"version":"current","frontMatter":{"id":"deployments","title":"Realms (Deployments)"},"sidebar":"docs","previous":{"title":"Dashboard Overview","permalink":"/docs/self-service/dashboard-overview"},"next":{"title":"Dedicated Clusters","permalink":"/docs/self-service/dedicated-clusters"}}');var t=n(74848),l=n(28453);const r={id:"deployments",title:"Realms (Deployments)"},o=void 0,i={},c=[{value:"Regions",id:"regions",level:2},{value:"Creating a realm (deployment)",id:"creating-a-realm-deployment",level:2},{value:"Adding a realm to a cluster",id:"adding-a-realm-to-a-cluster",level:2},{value:"Opening the admin console for a realm",id:"opening-the-admin-console-for-a-realm",level:2},{value:"Realm status",id:"realm-status",level:2},{value:"Issues with access to the Admin Console",id:"issues-with-access-to-the-admin-console",level:2},{value:"Direct Admin Console URL",id:"direct-admin-console-url",level:2}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"A Deployment is a Phase Two hosted instance of a Keycloak Realm in a Phase Two enhanced Keycloak cluster. These clusters can be shared with other customers, or dedicated for customers in paid plans. Free, shared plans are allowed one Deployment per customer, and dedicated plans can create up to 20 Realms per cluster."}),"\n",(0,t.jsx)(s.h2,{id:"regions",children:"Regions"}),"\n",(0,t.jsx)(s.p,{children:"Shared clusters are currently operating in the following regions:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["AWS US West (Oregon) ",(0,t.jsx)(s.code,{children:"us-west-2"})]}),"\n",(0,t.jsxs)(s.li,{children:["AWS Europe (Frankfurt) ",(0,t.jsx)(s.code,{children:"eu-central-1"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Dedicated clusters can be launched in most AWS or GCP regions by request."}),"\n",(0,t.jsx)(s.h2,{id:"creating-a-realm-deployment",children:"Creating a realm (deployment)"}),"\n",(0,t.jsxs)(s.p,{children:["Once you have logged in the self-service tool, you have two options to ",(0,t.jsx)(s.a,{href:"https://dash.phasetwo.io/realms/add-realm",children:"create a new realm"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Single realms do not live in dedicated clusters but in the shared Phase Two infrastructure."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Open this link directly: ",(0,t.jsx)(s.a,{href:"https://dash.phasetwo.io/realms/add-realm",children:"Add Realm"})]}),"\n",(0,t.jsxs)(s.li,{children:["Click on the ",(0,t.jsx)(s.strong,{children:"Add Realm"}),' button in the top right area of the "Overview" page.']}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/overview-add-realm.png",className:"max-w-xl",alt:"Phase Two Dash Overview Add Realm"}),(0,t.jsx)("figcaption",{children:"Add Realm from Overview"})]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Click on the ",(0,t.jsx)(s.a,{href:"https://dash.phasetwo.io/realms",children:(0,t.jsx)(s.strong,{children:"Realms"})})," menu item and select the ",(0,t.jsx)(s.strong,{children:"Create Realm"})," button (top right)."]}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/realms-create-realm.png",className:"max-w-xl",alt:"Phase Two Dash Overview Add Realm"}),(0,t.jsx)("figcaption",{children:"Add Realm from realms"})]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Fill out necessary details.You must input a name (unique), choose a region (",(0,t.jsx)(s.code,{children:"eu-central-1"})," or ",(0,t.jsx)(s.code,{children:"us-west-2"})," at present), and assign it to an Organization for management. All users have an organization created by default upon sign-up."]}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/realms-add-realm.png",className:"max-w-xl",alt:"Phase Two Dash Overview Add Realm"}),(0,t.jsx)("figcaption",{children:"Add Realm information"})]}),"\n",(0,t.jsx)(s.h2,{id:"adding-a-realm-to-a-cluster",children:"Adding a realm to a cluster"}),"\n",(0,t.jsx)(s.p,{children:"Adding a realm to an existing cluster is available within the context of the specific cluster."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Visit the ",(0,t.jsx)(s.a,{href:"https://dash.phasetwo.io/clusters",children:"cluster overview page"}),". Locate the cluster you want to add a realm to"]}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/clusters.png",className:"max-w-2xl",alt:"Phase Two Dash Cluster"}),(0,t.jsx)("figcaption",{children:"Cluster overview"})]}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsx)(s.li,{children:'From the overview page, click "Add Realm" on the cluster card.'}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/clusters-add-realm.png",className:"max-w-2xl",alt:"Phase Two Dash Cluster Overview Add Realm"}),(0,t.jsx)("figcaption",{children:"Add realm from cluster overview"})]}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:'Or from the Cluster details page, click "Add Realm" in the top right.'}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/cluster-details-add-realm.png",className:"max-w-2xl",alt:"Phase Two Dash Cluster Details"}),(0,t.jsx)("figcaption",{children:"Cluster details add realm"})]}),"\n",(0,t.jsxs)(s.ol,{start:"4",children:["\n",(0,t.jsx)(s.li,{children:"Enter information and create the realm."}),"\n"]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dashboard/cluster-add-realm.png",className:"max-w-2xl",alt:"Phase Two Dash Cluster Details"}),(0,t.jsx)("figcaption",{children:"Cluster details add realm"})]}),"\n",(0,t.jsx)(s.h2,{id:"opening-the-admin-console-for-a-realm",children:"Opening the admin console for a realm"}),"\n",(0,t.jsxs)(s.p,{children:["From the ",(0,t.jsx)(s.a,{href:"https://dash.phasetwo.io/realms",children:"realms view"}),' find the realm you want to use. Click the "Arrow" or ',(0,t.jsx)(s.strong,{children:"Console"})," button to create a login link and open it in another browser window. Or on the realm detail view, click ",(0,t.jsx)(s.strong,{children:"Console"})," in the rop right."]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/dash-v2-open-console-realms-view.png",className:"max-w-xl",alt:"Phase Two Realms View Open Console Link"}),(0,t.jsx)("figcaption",{children:"Open Console Link from Realm Card"})]}),"\n",(0,t.jsx)(s.h2,{id:"realm-status",children:"Realm status"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Pending"}),": Realm is pending creation. It should resolve and be ready soon."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Active"}),": Realm is ready to be used."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Disabled"}),": Realm is currently unavailable."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["If you experience an issue with a realm not working, please ",(0,t.jsx)(s.a,{href:"mailto:support@phasetwo.io",children:"contact support"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"issues-with-access-to-the-admin-console",children:"Issues with access to the Admin Console"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"The Open Console link doesn't work"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Access to the Admin Console using the ",(0,t.jsx)(s.em,{children:"Open Console"})," link requires your Deployment Realm to have a user with the username ",(0,t.jsx)(s.code,{children:"admin"}),", which is automatically created when the Deployment is provisioned. In order to maintain access using this mechanism, you ",(0,t.jsx)(s.strong,{children:"must not"})," change this username or its role mappings. Sometimes, if you have ",(0,t.jsx)(s.em,{children:"Email as username"})," set in your Realm, you might inadvertently change the username by changing the email. If you have lost access and need us to restore the admin account, please email ",(0,t.jsx)(s.a,{href:"mailto:support@phasetwo.io",children:"support@phasetwo.io"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["You can also create a backup account to access your Deployment directly. Create an account with all ",(0,t.jsx)(s.code,{children:"realm-management"})," Client Roles assigned, and you will be able to log in and use the direct link to the Admin Console below. You can also create admin accounts that are assigned restricted permissions (e.g. only managing users) by selecting a subset of the ",(0,t.jsx)(s.code,{children:"realm-management"})," Client Roles."]}),"\n",(0,t.jsx)(s.h2,{id:"direct-admin-console-url",children:"Direct Admin Console URL"}),"\n",(0,t.jsx)(s.p,{children:"You may choose to access the Admin Console directly for users with admin roles. Construct the URL as below:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"https://{cluster-host}/auth/admin/{realm-name}/console\n\n- cluster-host: The hostname of the Cluster (shared or dedicated)\n- realm-name: The name of the Deployment\n"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"I've lost access to the Admin Console!"}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["In addition to the above issue with removing the ",(0,t.jsx)(s.code,{children:"admin"})," account, another restriction is that you cannot change the name of your Deployment in the ",(0,t.jsx)(s.em,{children:"Realm Settings"})," of the Account Console. While it is technically supported in Keycloak, it can produce problems, and causes the metadata we use to log you in from the dashboard to be inaccurate. Because of this, we do not support changing Deployment names after they are created. If you need to change the name, you can delete your Deployment and create a new one."]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);