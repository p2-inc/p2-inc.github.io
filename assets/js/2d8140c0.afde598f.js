"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[6792],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return h}});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=u(a),h=o,d=m["".concat(l,".").concat(h)]||m[h]||c[h]||i;return a?n.createElement(d,r(r({ref:t},p),{},{components:a})):n.createElement(d,r({ref:t},p))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var u=2;u<i;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},90021:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return r},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return u}});var n=a(83117),o=(a(67294),a(3905));const i={slug:"organgizations-multi-tenant-update",title:"Phase Two's Organizations, a Keycloak Multi-Tenant Extension and Keycloak's Upcoming Organization's Feature",description:"Phase Two's Organization extensions bring single-realm multi-tenancy to Keycloak. Keycloak is officially developing a native version, but it's not a one-to-one replacement.",authors:"phasetwo",tags:["open_source","release","keycloak","phase_two","organizations","multi_tenant","multi_tenancy"]},r=void 0,s={permalink:"/blog/organgizations-multi-tenant-update",source:"@site/blog/2024-05-29-keycloak-orgs.md",title:"Phase Two's Organizations, a Keycloak Multi-Tenant Extension and Keycloak's Upcoming Organization's Feature",description:"Phase Two's Organization extensions bring single-realm multi-tenancy to Keycloak. Keycloak is officially developing a native version, but it's not a one-to-one replacement.",date:"2024-05-29T00:00:00.000Z",formattedDate:"May 29, 2024",tags:[{label:"open_source",permalink:"/blog/tags/open-source"},{label:"release",permalink:"/blog/tags/release"},{label:"keycloak",permalink:"/blog/tags/keycloak"},{label:"phase_two",permalink:"/blog/tags/phase-two"},{label:"organizations",permalink:"/blog/tags/organizations"},{label:"multi_tenant",permalink:"/blog/tags/multi-tenant"},{label:"multi_tenancy",permalink:"/blog/tags/multi-tenancy"}],readingTime:4.7,hasTruncateMarker:!0,authors:[{name:"Phase Two",title:"Hosted Keycloak and Keycloak Support",url:"https://github.com/p2-inc",email:"support@phasetwo.io",imageURL:"https://avatars.githubusercontent.com/u/60152109?s=200&v=4",key:"phasetwo"}],frontMatter:{slug:"organgizations-multi-tenant-update",title:"Phase Two's Organizations, a Keycloak Multi-Tenant Extension and Keycloak's Upcoming Organization's Feature",description:"Phase Two's Organization extensions bring single-realm multi-tenancy to Keycloak. Keycloak is officially developing a native version, but it's not a one-to-one replacement.",authors:"phasetwo",tags:["open_source","release","keycloak","phase_two","organizations","multi_tenant","multi_tenancy"]},prevItem:{title:"Keycloak vs. Okta, a Open-Source Alternative",permalink:"/blog/keycloak-vs-okta-open-source-alternative"},nextItem:{title:"Securing an Angular and Spring Boot Application with Keycloak",permalink:"/blog/secure-spring-boot"}},l={authorsImageUrls:[void 0]},u=[{value:"What you get in Phase Two&#39;s Organization Extension",id:"what-you-get-in-phase-twos-organization-extension",level:3},{value:"What does that translate to for my workflow and business use-cases?",id:"what-does-that-translate-to-for-my-workflow-and-business-use-cases",level:3},{value:"Main differences between Keycloak&#39;s Organization feature and Phase Two&#39;s Organzation extension",id:"main-differences-between-keycloaks-organization-feature-and-phase-twos-organzation-extension",level:3}],p={toc:u};function c(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Since we first released our (most) popular Keycloak extension, Keycloak ",(0,o.kt)("a",{parentName:"p",href:"https://phasetwo.io/product/organizations/"},"Organizations")," (Orgs) and made it available as open source on ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/p2-inc/keycloak-orgs"},"Github"),", the Keycloak maintainers have decided to build into native organization support."),(0,o.kt)("p",null,"This begs the question? What is different between Keycloak's upcoming organizations feature and the Phase Two Organization Extension?"),(0,o.kt)("p",null,'To understand the difference it\'s important to first understand what the Phase Two Organization extension is. When we initially built this extension, we were struggling to solve the problem of "multi-tenant" Keycloak. During that process we learned a lot.'),(0,o.kt)("p",null,"Other approaches that we tried and decided against were:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"One Realm for each tenant"),(0,o.kt)("li",{parentName:"ul"},"Using existing Keycloak Groups to model Organizations, Roles and Memberships")),(0,o.kt)("p",null,"Each of these approaches had trade-offs of scale or frailty we found undesirable or unacceptable to meet our requirements. We proceeded to create the Organization extension now in use by hundreds of companies."),(0,o.kt)("h3",{id:"what-you-get-in-phase-twos-organization-extension"},"What you get in Phase Two's Organization Extension"),(0,o.kt)("p",null,"Within the extension, the following are treated in a first-class manner"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Organizations"),': "tenants" or "customers" as commonly used. A Realm can have multiple Organizations.'),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Memberships"),": the relationship of Users to Organizations. Users may be members of multiple Organizations."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Roles"),": mechanisms of role-based security specific to an Organization, much like Keycloak Realm Roles and Client Roles. In addition to a set of standard roles related to Organization data visibility and management, administrators can create Roles unique to an organization. Users who are Members of Organizations can be granted that Organization's Roles."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Invitations"),": allow Users and non-Users to be invited to join an Organization. Invitations can be created by administrators or Organization members with permission."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Domains"),": email domains that are used to automatically select Organization IdPs using the optional authenticators. Included is a facility to validate customer domain ownership using DNS records.")),(0,o.kt)("h3",{id:"what-does-that-translate-to-for-my-workflow-and-business-use-cases"},"What does that translate to for my workflow and business use-cases?"),(0,o.kt)("p",null,"Organizations are about empowering your customers and developers. They are about being able to segment customers into the right logical unit for interaction with your application. Effectively, they allow much more fine-grained ability to mimic the structure of a business in real-life within Keycloak, including permissions (roles, authorization)."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Self-management for your customers through the ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/product/adminportal/"},"Admin Portal")," to enable ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/docs/organizations/membership/"},"membership management")," and ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/docs/organizations/invitations/"},"invitations"),"."),(0,o.kt)("li",{parentName:"ol"},"Self-management for your developers via strong ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/api/category/organizations/"},"API capabilities")),(0,o.kt)("li",{parentName:"ol"},"Enterprise ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/docs/sso/"},"SSO")," Login for each customer"),(0,o.kt)("li",{parentName:"ol"},"Enhanced ",(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/docs/organizations/roles/"},"roles"),", permissions and authorization per customer."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://phasetwo.io/docs/sso/setup/#associating-organizations"},"Domain-based association")," for registration and sign-up."),(0,o.kt)("li",{parentName:"ol"},"Attribute management to apply and manage metadata to members of the organization."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/p2-inc/keycloak-orgs/blob/main/docs/active-organization.md"},"Active organization")," for the ability to switch between organizations (when part of many organizations).")),(0,o.kt)("h3",{id:"main-differences-between-keycloaks-organization-feature-and-phase-twos-organzation-extension"},"Main differences between Keycloak's Organization feature and Phase Two's Organzation extension"),(0,o.kt)("p",null,"The Keycloak team at RedHat has ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/keycloak/keycloak/discussions/23948"},"announced")," that they will be building an Organizations feature into the core product. We have previously offered to change our license and donate our extension to the project, but this was not considered. We participated in some of the public discussions around this feature, as well as provided feedback on their product features privately."),(0,o.kt)("p",null,"Work has begun, and they plan to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/keycloak/keycloak/issues/28609"},"release")," some base features with ",(0,o.kt)("inlineCode",{parentName:"p"},"experimental")," support in Keycloak ",(0,o.kt)("inlineCode",{parentName:"p"},"25"),". They expect a full feature set and promotion to ",(0,o.kt)("inlineCode",{parentName:"p"},"preview")," by Keycloak ",(0,o.kt)("inlineCode",{parentName:"p"},"26"),". There are a few GitHub issues that indicate the features they plan to release, but there is not a comprehensive requirements or product feature plan available publicly."),(0,o.kt)("p",null,"It has been our goal since building this extension to have this approach to multi-tenancy built into Keycloak, and we have proven through many customers/user that is serves a real need. We're excited to see what they will build, and are flattered they have used our extension for inspiration."),(0,o.kt)("p",null,"We have several hundred customers and users of this extension, and there have been many asking about the future of this extension, given the above. We've put together these notes, and will continue to update them as we learn more."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"First of all, ",(0,o.kt)("strong",{parentName:"li"},"this extension is not going away"),". In addition to the fact we have long-term support agreements with many of our customers, we also don't currently have a picture of what Keycloak's implementation will ultimately look like."),(0,o.kt)("li",{parentName:"ul"},"We continue to believe that our (Phase Two's) value is in ",(0,o.kt)("strong",{parentName:"li"},"making Keycloak easy to use"),", primarily for an audience that is using it as a ",(0,o.kt)("strong",{parentName:"li"},"CIAM tool for enterprise SaaS applications"),". We have tailored the feature set to that audience, and will continue to build out tools on top of our own organizations extension, such as the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/p2-inc/phasetwo-admin-portal"},"admin portal")," and ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/p2-inc/idp-wizard"},"IdP wizards")," to facilitate making your app enterprise-ready quickly."),(0,o.kt)("li",{parentName:"ul"},"We plan ",(0,o.kt)("strong",{parentName:"li"},"not to enable native Keycloak organizations")," in our hosted product, and it will be set (in env vars) off in our Docker images."),(0,o.kt)("li",{parentName:"ul"},"We have initiated a project to ",(0,o.kt)("strong",{parentName:"li"},"move our organizations (and other) admin UI tools outside of the Keycloak Admin UI"),". In addition to proving very time consuming because of the pace of breaking changes, we realized that we can iterate faster for customer value by building our own admin UI. More information on that coming soon."),(0,o.kt)("li",{parentName:"ul"},"We will continue to ",(0,o.kt)("strong",{parentName:"li"},"participate in discussions with RedHat")," and the Keycloak maintainers to advocate for our customers' needs and the features we have proven over >3 years."),(0,o.kt)("li",{parentName:"ul"},"If there is ",(0,o.kt)("strong",{parentName:"li"},"eventually sufficient feature parity")," between native Keycloak organizations and this extension, ",(0,o.kt)("strong",{parentName:"li"},"we will provide a migration path"),".")),(0,o.kt)("p",null,"This will probably cause a lot of confusion as native Keycloak organizations is released. We appreciate the patience and support that customers and users have shown us, and we hope to continue to support you with ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/p2-inc"},"great Keycloak extensions and tools"),"."))}c.isMDXComponent=!0}}]);