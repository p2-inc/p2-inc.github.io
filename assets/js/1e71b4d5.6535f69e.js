"use strict";(globalThis.webpackChunkphasetwo_docs=globalThis.webpackChunkphasetwo_docs||[]).push([[14002],{7355(e,i,r){r.r(i),r.d(i,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"organizations/idp-wizard","title":"IdP Wizard","description":"The Organization IdP Wizard allows members of an organization with appropriate permissions to self-manage their organization\'s identity providers. It allows users to set up and configure SAML and OIDC identity providers for their organization without requiring intervention from IT support or administrators.","source":"@site/docs/organizations/idp-wizard.md","sourceDirName":"organizations","slug":"/organizations/idp-wizard","permalink":"/docs/organizations/idp-wizard","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/organizations/idp-wizard.md","tags":[],"version":"current","frontMatter":{"id":"idp-wizard","title":"IdP Wizard"},"sidebar":"docs","previous":{"title":"Roles","permalink":"/docs/organizations/roles"},"next":{"title":"Identity Providers","permalink":"/docs/organizations/identity-providers"}}');var t=r(86070),o=r(49531);const d={id:"idp-wizard",title:"IdP Wizard"},s=void 0,a={},l=[{value:"Create an IdP Wizard link",id:"create-an-idp-wizard-link",level:3},{value:"Admin UI",id:"admin-ui",level:4},{value:"API",id:"api",level:4},{value:"Setting Realm Attributes for Manual Control",id:"setting-realm-attributes-for-manual-control",level:3}];function c(e){const i={a:"a",code:"code",em:"em",h3:"h3",h4:"h4",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.p,{children:"The Organization IdP Wizard allows members of an organization with appropriate permissions to self-manage their organization's identity providers. It allows users to set up and configure SAML and OIDC identity providers for their organization without requiring intervention from IT support or administrators."}),"\n",(0,t.jsx)(i.h3,{id:"create-an-idp-wizard-link",children:"Create an IdP Wizard link"}),"\n",(0,t.jsx)(i.p,{children:"There are two mechanisms of creating an IdP Wizard link. Choosing one depends on how you wish to expose this to your users."}),"\n",(0,t.jsx)(i.h4,{id:"admin-ui",children:"Admin UI"}),"\n",(0,t.jsxs)(i.p,{children:['In the Admin UI, in the Organizations tab, when you select an organization, the upper right context menu allows you to select "Create IdP Wizard link". This will create an IdP Wizard link for the ',(0,t.jsx)(i.strong,{children:"default"})," organization user. This is a user that is created by default when the organization is created for the purpose of executing administrative tasks for the organization. It is not associated with a real member of the organization. It has full privileges within the organization, so be careful who and how this link is distributed. It will be active for 1 day following creation."]}),"\n",(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:"/docs/organizations/wizard/idp-wizard-link.png",alt:"IdP Wizard link creation in Keycloak Admin UI",className:"max-w-3xl"}),(0,t.jsx)("figcaption",{children:"Create an IdP Wizard Link"})]}),"\n",(0,t.jsx)(i.h4,{id:"api",children:"API"}),"\n",(0,t.jsxs)(i.p,{children:["You can programmatically create IdP Wizard links for your users with the API. This allows you to create a link for a specific user. The portal itself will take care of restricting access based on that user's organization permissions. Please refer to the API documentation to ",(0,t.jsx)(i.a,{href:"/api/create-portal-link",children:"create a link for the organization's admin portal"}),". Because this is an expiring link, it is recommended that you do not create the link until it has been selected in your application."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"/api/create-portal-link",children:"API Link"})}),"\n",(0,t.jsx)(i.h3,{id:"setting-realm-attributes-for-manual-control",children:"Setting Realm Attributes for Manual Control"}),"\n",(0,t.jsxs)(i.p,{children:["There are some reasonable defaults used for the configuration, but the behavior of the wizards depends on a few variables, stored as Realm attributes. View ",(0,t.jsx)(i.a,{href:"https://github.com/p2-inc/idp-wizard?tab=readme-ov-file#configuration",children:"Github repo"})," about configuration."]}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Realm attribute key"}),(0,t.jsx)(i.th,{children:"Default"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.apiMode"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"onprem"})}),(0,t.jsxs)(i.td,{children:[(0,t.jsx)(i.code,{children:"onprem"})," or ",(0,t.jsx)(i.code,{children:"cloud"}),". ",(0,t.jsx)(i.code,{children:"onprem"})," uses the Keycloak Admin APIs to set up an Identity Provider, so the user must have the correct ",(0,t.jsx)(i.code,{children:"realm-management"})," roles. ",(0,t.jsx)(i.code,{children:"cloud"}),' uses the Phase Two Organizations API, so the user must have membership in an organization with the correct organization roles. A "picker" will be shown to the user if they have both and/or roles in more than one organization.']})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.emailAsUsername"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"false"})}),(0,t.jsxs)(i.td,{children:["When building Identity Provider mappers, should the IdP email address be mapped to the Keycloak ",(0,t.jsx)(i.code,{children:"username"})," field."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableDashboard"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Show a minimal dashboard showing the state of the setup."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableDirectorySync"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Show Directory Sync section."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableGroupMapping"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Currently does nothing."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableIdentityProvider"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Show Identity Provider section."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableLdap"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Allow LDAP config."})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.enableScim"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"true"})}),(0,t.jsx)(i.td,{children:"Allow SCIM config. (not currently used)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.trustEmail"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"false"})}),(0,t.jsxs)(i.td,{children:["Toggle ",(0,t.jsx)(i.em,{children:"trust email"})," in the IdP config."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.assets.logo.url"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.em,{children:"none"})}),(0,t.jsxs)(i.td,{children:["URL for logo override. Inherited from ",(0,t.jsx)(i.code,{children:"keycloak-orgs"})," config so we can use the same logo."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"_providerConfig.wizard.appName"})}),(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"Phase Two"})}),(0,t.jsx)(i.td,{children:"App name to appear in the HTML title."})]})]})]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},49531(e,i,r){r.d(i,{R:()=>d,x:()=>s});var n=r(30758);const t={},o=n.createContext(t);function d(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);