"use strict";(self.webpackChunkphasetwo_docs=self.webpackChunkphasetwo_docs||[]).push([[38202],{28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>r});var n=a(96540);const c={},o=n.createContext(c);function s(e){const t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),n.createElement(o.Provider,{value:t},e.children)}},99959:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"securing-applications/react","title":"React","description":"Many SPAs use a framework such as React to simplify the creation of interactive experiences. We suggest the use of the open source react-keycloak library to make securing React applications easier.","source":"@site/docs/securing-applications/react.md","sourceDirName":"securing-applications","slug":"/securing-applications/react","permalink":"/docs/securing-applications/react","draft":false,"unlisted":false,"editUrl":"https://github.com/p2-inc/phasetwo-docs/tree/main/docs/securing-applications/react.md","tags":[],"version":"current","frontMatter":{"id":"react","title":"React"},"sidebar":"docs","previous":{"title":"JavaScript","permalink":"/docs/securing-applications/javascript"},"next":{"title":"Next.js","permalink":"/docs/securing-applications/next"}}');var c=a(74848),o=a(28453);const s={id:"react",title:"React"},r=void 0,i={},l=[{value:"Example",id:"example",level:3},{value:"Setup Keycloak instance",id:"setup-keycloak-instance",level:4},{value:"Setup ReactKeycloakProvider",id:"setup-reactkeycloakprovider",level:4},{value:"Using hooks",id:"using-hooks",level:4}];function p(e){const t={a:"a",code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.p,{children:["Many SPAs use a framework such as ",(0,c.jsx)(t.a,{href:"https://reactjs.org/",children:"React"})," to simplify the creation of interactive experiences. We suggest the use of the open source ",(0,c.jsx)(t.a,{href:"https://github.com/react-keycloak/react-keycloak",children:"react-keycloak"})," library to make securing React applications easier."]}),"\n",(0,c.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,c.jsxs)(t.p,{children:["Phase Two has a ",(0,c.jsx)(t.a,{href:"https://github.com/p2-inc/examples",children:"React project"})," with sample code or view a ",(0,c.jsx)(t.a,{href:"https://phasetwo-react-example.vercel.app/",children:"live deployed version"}),"."]}),"\n",(0,c.jsxs)(t.p,{children:["Keycloak has setup instructions in their ",(0,c.jsx)(t.a,{href:"https://www.npmjs.com/package/@react-keycloak/web",children:"library documentation"}),"."]}),"\n",(0,c.jsx)(t.h4,{id:"setup-keycloak-instance",children:"Setup Keycloak instance"}),"\n",(0,c.jsxs)(t.p,{children:["Create a ",(0,c.jsx)(t.code,{children:"keycloak.js"})," file in the ",(0,c.jsx)(t.code,{children:"src"})," folder of your project (e.g. where ",(0,c.jsx)(t.code,{children:"App.js"})," is located) with the following content:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",children:"import Keycloak from \"keycloak-js\";\n\n// Pass initialization options as required or leave blank to load from 'keycloak.json'\nconst keycloak = new Keycloak();\n\nexport default keycloak;\n"})}),"\n",(0,c.jsxs)(t.p,{children:["Further documentation on setup of the Keycloak instance is in the official documentation ",(0,c.jsx)(t.a,{href:"https://www.keycloak.org/docs/latest/securing_apps/#_javascript_adapter",children:"https://www.keycloak.org/docs/latest/securing_apps/#_javascript_adapter"})]}),"\n",(0,c.jsx)(t.h4,{id:"setup-reactkeycloakprovider",children:"Setup ReactKeycloakProvider"}),"\n",(0,c.jsxs)(t.p,{children:["Once you have set up the ",(0,c.jsx)(t.code,{children:"Keycloak"})," instance there, you can easily wrap components you wish to protect using the ",(0,c.jsx)(t.code,{children:"ReactKeycloakProvider"}),"."]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",children:'import { ReactKeycloakProvider } from "@react-keycloak/web";\n\nimport keycloak from "./keycloak";\n\n// Wrap everything inside KeycloakProvider\nconst App = () => {\n  return (\n    <ReactKeycloakProvider authClient={keycloak}>...</ReactKeycloakProvider>\n  );\n};\n'})}),"\n",(0,c.jsx)(t.h4,{id:"using-hooks",children:"Using hooks"}),"\n",(0,c.jsxs)(t.p,{children:["When a component requires access to Keycloak, you can use the ",(0,c.jsx)(t.code,{children:"useKeycloak"})," Hook."]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",children:'import { useKeycloak } from "@react-keycloak/web";\n\nexport default () => {\n  // Using Object destructuring\n  const { keycloak, initialized } = useKeycloak();\n\n  // Here you can access all of keycloak methods and variables.\n  // See https://www.keycloak.org/docs/latest/securing_apps/index.html#javascript-adapter-reference\n\n  return (\n    <div>\n      <div>{`User is ${\n        !keycloak.authenticated ? "NOT " : ""\n      }authenticated`}</div>\n\n      {!!keycloak.authenticated && (\n        <button type="button" onClick={() => keycloak.logout()}>\n          Logout\n        </button>\n      )}\n    </div>\n  );\n};\n'})})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(p,{...e})}):p(e)}}}]);