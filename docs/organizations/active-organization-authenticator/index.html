<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-organizations/active-organization-authenticator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Active Organization Authenticator | Managed Keycloak Hosting and Enterprise Keycloak Support</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://phasetwo.io/docs/organizations/active-organization-authenticator/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="keycloak, iam, sso"><meta data-rh="true" property="og:logo" content="/img/appstore.png" size="1024x1024"><meta data-rh="true" property="og:image" content="/img/og_image_app.png" size="1200x630"><meta data-rh="true" property="og:logo" content="/img/playstore.png" size="512x512"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Active Organization Authenticator | Managed Keycloak Hosting and Enterprise Keycloak Support"><meta data-rh="true" name="description" content="Note that to have the active_organization information in tokens, you need the &quot;Active Organization&quot; mapper."><meta data-rh="true" property="og:description" content="Note that to have the active_organization information in tokens, you need the &quot;Active Organization&quot; mapper."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://phasetwo.io/docs/organizations/active-organization-authenticator/"><link data-rh="true" rel="alternate" href="https://phasetwo.io/docs/organizations/active-organization-authenticator/" hreflang="en"><link data-rh="true" rel="alternate" href="https://phasetwo.io/docs/organizations/active-organization-authenticator/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://W4PN7W5A70-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Organizations","item":"https://phasetwo.io/docs/organizations/"},{"@type":"ListItem","position":2,"name":"Active Organization Authenticator","item":"https://phasetwo.io/docs/organizations/active-organization-authenticator"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Managed Keycloak Hosting and Enterprise Keycloak Support RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Managed Keycloak Hosting and Enterprise Keycloak Support Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Managed Keycloak Hosting and Enterprise Keycloak Support" href="/opensearch.xml">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/preflight.min.css">



<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script src="https://www.termsfeed.com/public/cookie-consent/4.1.0/cookie-consent.js" charset="UTF-8" defer="defer"></script>
<script src="https://www.googletagmanager.com/gtag/js?id=UA-160183620-1" async data-cookie-consent="tracking"></script><link rel="stylesheet" href="/assets/css/styles.d5ed0623.css">
<script src="/assets/js/runtime~main.aeb7969a.js" defer="defer"></script>
<script src="/assets/js/main.f7d1c7e0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#3fa1e3;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><a href="/blog/dashboard-launch/">Announcing our new Dashboard!</a> New self-serve features for cluster/realm management (observability, configuration, and more).</div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_phase_slash.svg" alt="Phase Two" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_phase_slash.svg" alt="Phase Two" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/hosting/">Hosting</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/support/">Support</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/support/">Enterprise Support</a></li><li><a class="dropdown__link" href="/support/migrate-to-keycloak/">Migration to Keycloak</a></li><li><a class="dropdown__link" href="/support/emergency-support/">Emergency Keycloak Assistance</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Product</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/product/onprem/">On-Premise Deployment</a></li><li><a class="dropdown__link" href="/product/sso/">SSO</a></li><li><a class="dropdown__link" href="/product/identity/">Identity</a></li><li><a class="dropdown__link" href="/product/organizations/">Organizations</a></li><li><a class="dropdown__link" href="/product/adminportal/">Admin Portal</a></li><li><a class="dropdown__link" href="/product/integrations/">Integrations</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developers</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/introduction/">Docs</a></li><li><a class="dropdown__link" href="/api/phase-two-admin-rest-api/">API</a></li><li><a href="https://github.com/p2-inc#our-extensions-" target="_blank" rel="noopener noreferrer" class="dropdown__link">Keycloak Extensions<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li><a class="dropdown__link" href="/articles/introduction/">Articles</a></li><li><a href="https://github.com/p2-inc/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/pricing/">Pricing</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" buttontype="btnSecondary" href="/contact/">Contact</a><a href="https://dash.phasetwo.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" buttontype="btnPrimary" title="Login or Register">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/introduction/">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/getting-started/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/self-service/">Dashboard</a><button aria-label="Expand sidebar category &#x27;Dashboard&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/securing-applications/">Securing Applications</a><button aria-label="Expand sidebar category &#x27;Securing Applications&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/api/">API + Access</a><button aria-label="Expand sidebar category &#x27;API + Access&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/authentication/">Authentication</a><button aria-label="Expand sidebar category &#x27;Authentication&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/sso/">SSO</a><button aria-label="Expand sidebar category &#x27;SSO&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/organizations/">Organizations</a><button aria-label="Collapse sidebar category &#x27;Organizations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/attributes/">Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/membership/">Membership</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/invitations/">Invitations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/roles/">Roles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/identity-providers/">Identity Providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/active-organization/">Active Organization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/organizations/active-organization-authenticator/">Active Organization Authenticator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/organizations-import-export/">Import/Export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/organizations/organizations-events/">Events</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/admin-portal/">Admin Portal</a><button aria-label="Expand sidebar category &#x27;Admin Portal&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/audit-logs/">Audit Logs</a><button aria-label="Expand sidebar category &#x27;Audit Logs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/user-migration/">User Migration</a><button aria-label="Expand sidebar category &#x27;User Migration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/security/">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/hosting/">Hosting</a><button aria-label="Expand sidebar category &#x27;Hosting&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/keycloak/">Keycloak</a><button aria-label="Expand sidebar category &#x27;Keycloak&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/organizations/"><span>Organizations</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Active Organization Authenticator</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Active Organization Authenticator</h1></header><p>Note that to have the <code>active_organization</code> information in tokens, you need the &quot;Active Organization&quot; <a href="/docs/organizations/active-organization/#mappers">mapper</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="explanation">Explanation<a href="#explanation" class="hash-link" aria-label="Direct link to Explanation" title="Direct link to Explanation">​</a></h2>
<p>You can add the <code>Select Organization</code> authenticator into the user authentication flow. With this authenticator enabled, you can pass the query parameters:</p>
<ul>
<li><code>prompt=select_account</code></li>
<li><code>account_hint={ORG-ID}</code></li>
</ul>
<p>In all cases, if the user tries to access an organization where they are not a member, an error will be returned.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promptselect_account">prompt=select_account<a href="#promptselect_account" class="hash-link" aria-label="Direct link to prompt=select_account" title="Direct link to prompt=select_account">​</a></h3>
<p>If the <code>prompt=select_account</code> is given for the authentication flow, the user will be requested to select an organization during login.</p>
<p>Note that:</p>
<ul>
<li>If the user doesn&#x27;t have any organization, an error is returned.</li>
<li>If the user has only 1 organization, the selection will be skipped, and it will use this organization.</li>
</ul>
<p><em>Example of authentication request:</em></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{HOSTNAME}/realms/{REALM}/protocol/openid-connect/auth?response_type=code&amp;client_id={PUBLIC-CLIENT}&amp;scope=openid&amp;redirect_uri={HOSTNAME}/realms/{REALM}/account&amp;prompt=select_account</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account_hint">account_hint<a href="#account_hint" class="hash-link" aria-label="Direct link to account_hint" title="Direct link to account_hint">​</a></h3>
<p>If the <code>account_hint={ORG-ID}</code> is given for the authentication flow, it will use the given organization without having to select one.
<em>Example of authentication request:</em></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{HOSTNAME}/realms/{REALM}/protocol/openid-connect/auth?response_type=code&amp;client_id={PUBLIC-CLIENT}&amp;scope=openid&amp;redirect_uri={HOSTNAME}/realms/{REALM}/account&amp;account_hint={ORG-ID}</span><br></span></code></pre></div></div>
<p><em>or with the <code>prompt=select_account</code></em>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{HOSTNAME}/realms/{REALM}/protocol/openid-connect/auth?response_type=code&amp;client_id={PUBLIC-CLIENT}&amp;scope=openid&amp;redirect_uri={HOSTNAME}/realms/{REALM}/account&amp;prompt=select_account&amp;account_hint={ORG-ID}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="account-switching">account switching<a href="#account-switching" class="hash-link" aria-label="Direct link to account switching" title="Direct link to account switching">​</a></h3>
<p>To <strong>switch account based on account_hint</strong>, you will need to define the &#x27;Select Organization&#x27; step after the Cookie step. For that, you will need to
define a Sub-Flow like this:</p>
<p><img decoding="async" loading="lazy" alt="account-switch" src="/assets/images/account-switch-1557c1e0e2c25f16f7c6e49d893871b2.png" width="984" height="279" class="img_ev3q"></p>
<p>Then making an authentication request with <strong>account_hint</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{HOSTNAME}/realms/{REALM}/protocol/openid-connect/auth?response_type=code&amp;client_id={PUBLIC-CLIENT}&amp;scope=openid&amp;redirect_uri={HOSTNAME}/realms/{REALM}/account&amp;account_hint={ORG-ID}</span><br></span></code></pre></div></div>
<p>Will skip the select organization form and switch the organization (change user&#x27;s attribute).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-flows">Built-in Flows<a href="#built-in-flows" class="hash-link" aria-label="Direct link to Built-in Flows" title="Direct link to Built-in Flows">​</a></h2>
<p>A <strong>browser flow</strong> and <strong>direct grant flow</strong> have been added. They are similar to the default Keycloak built-in flows but include the Select Organization step.</p>
<p><img decoding="async" loading="lazy" alt="built-in-flows" src="/assets/images/built-in-flows-6d406b2b3b824212dece5710c88a0057.png" width="798" height="92" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-org-browser-flow">Select Org Browser Flow<a href="#select-org-browser-flow" class="hash-link" aria-label="Direct link to Select Org Browser Flow" title="Direct link to Select Org Browser Flow">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4>
<p><img decoding="async" loading="lazy" alt="browser-config" src="/assets/images/browser-config-237bf683d6cd890cacf3d0e7c86f3c4f.png" width="1092" height="1085" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="flow">Flow<a href="#flow" class="hash-link" aria-label="Direct link to Flow" title="Direct link to Flow">​</a></h4>
<p><img decoding="async" loading="lazy" alt="browser-flow" src="/assets/images/browser-flow-eb27906a2990dec60a5a8d8bb9e776f1.png" width="1308" height="461" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="select-org-direct-grant-flow">Select Org Direct Grant Flow<a href="#select-org-direct-grant-flow" class="hash-link" aria-label="Direct link to Select Org Direct Grant Flow" title="Direct link to Select Org Direct Grant Flow">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-1">Configuration<a href="#configuration-1" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4>
<p><img decoding="async" loading="lazy" alt="direct-grant-config" src="/assets/images/direct-grant-config-205b8f96df93cbf37b61862f44ad9330.png" width="1214" height="783" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="flow-1">Flow<a href="#flow-1" class="hash-link" aria-label="Direct link to Flow" title="Direct link to Flow">​</a></h4>
<p><img decoding="async" loading="lazy" alt="direct-grant-flow" src="/assets/images/direct-grant-flow-f0a41165841aad02dec49be191243756.png" width="1388" height="312" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration--example">Configuration &amp; Example<a href="#configuration--example" class="hash-link" aria-label="Direct link to Configuration &amp; Example" title="Direct link to Configuration &amp; Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="browser-flow-configuration">Browser Flow (Configuration)<a href="#browser-flow-configuration" class="hash-link" aria-label="Direct link to Browser Flow (Configuration)" title="Direct link to Browser Flow (Configuration)">​</a></h3>
<p>To configure the Browser Flow, you need to duplicate the default <code>Browser flow</code> and modify it.
In the <code>forms</code> part <em>(with Username Password Form)</em>, select <code>Add Step</code>.</p>
<p><img decoding="async" loading="lazy" alt="add-step" src="/assets/images/add-step-b0c6216cff94ca1ec10d8eff5a950815.png" width="1622" height="816" class="img_ev3q"></p>
<p>In the selection, search and select <code>Select Organization</code>.</p>
<p><img decoding="async" loading="lazy" alt="select-org-step" src="/assets/images/select-org-step-fc1242cdea366a715a5489d251447b1d.png" width="854" height="584" class="img_ev3q"></p>
<p>Once selected, enable it by setting it to <code>Required</code>.</p>
<p><img decoding="async" loading="lazy" alt="enable-select-organization" src="/assets/images/enable-select-organization-2f95d756195573c0c3eeeaa48b056796.png" width="1593" height="978" class="img_ev3q"></p>
<p>Don&#x27;t forget to bind this flow to &quot;Browser flow&quot;.</p>
<p><img decoding="async" loading="lazy" alt="bind-flow" src="/assets/images/bind-flow-1620a12a74bd8828a05c6b7e3280dfc0.png" width="1987" height="941" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples-tests">Examples (Tests)<a href="#examples-tests" class="hash-link" aria-label="Direct link to Examples (Tests)" title="Direct link to Examples (Tests)">​</a></h3>
<p>Once configured, you can test the authenticator with an authentication request including <code>prompt=select_account</code>.</p>
<p><strong>Example:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{HOSTNAME}/realms/{REALM}/protocol/openid-connect/auth?response_type=code&amp;client_id={PUBLIC-CLIENT}&amp;scope=openid&amp;redirect_uri={HOSTNAME}/realms/{REALM}/account&amp;prompt=select_account</span><br></span></code></pre></div></div>
<p>Once the user enter his username (or email) and password, he will have a drop-down to select an organization.</p>
<p><img decoding="async" loading="lazy" alt="org-choice-1" src="/assets/images/org-choice-1-04bbc114677a160e42c424f199a97ba2.png" width="532" height="283" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="org-choice-2" src="/assets/images/org-choice-2-a36ea094c37f284bac3e7e6a52a828d1.png" width="523" height="279" class="img_ev3q"></p>
<p>If the user has no organization, instead of the selection step, he will get an Error message.</p>
<p><img decoding="async" loading="lazy" alt="no-org" src="/assets/images/no-org-499b0b0085f8b93cd91adda36e73915d.png" width="526" height="207" class="img_ev3q"></p>
<p>If the user try to access an organization where is not a member (with <code>account_hint</code> for example), he will also get an error message.</p>
<p><img decoding="async" loading="lazy" alt="not-member" src="data:image/png;base64,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F/DgJj1nNBPuXMJDwcVMf8RwjZ82jmljyljzwRqK13poIgZ3aibDr7qfJbOvY3ifjq7JVy5gydLRFP3nSjZsXk5xfRP0cZOeOZwJP5526p8kCFZS+UXrzZDKza9RaT7aJoaCoXcwLffkZxRKd1Zw1eddTWKGqKgBEq3tInIm6W8riMg3o+pL8lYcoTRkPdCZa0AqHxcOYLD1gIj02Ff52wqaORCRb0Z6BtvnZVhbReQs0NVcnoiIiJynFA5ERETEROFARERETBQORERExEThQEREREwUDkRERMRE4UBERERMFA5ERETEROFARERETBQORERExEThQEREREwUDkRERMRE4UBERERMFA5ERETEROFARERETBQORERExEThQEREREwUDkRERMRE4UBERERMFA5ERETEROFARERETBQORERExEThQEREREwUDkRERMRE4UBERERMFA5ERETEROFARERETBQOTqB60zP8dn2Vtbmzgxv57eKNfGltFxER6WXOgXBQxVuLF/NWD+r3qap+73l+9/bJPJGXyi2v8+zjj/HAgl/ywK8W8uyqbXzptfY7wyrW89sl26i1tvdQQ9luvmwK73nY9p+LWf2/xh4iInIucFgbpGtJIyYzNZhibT6h6nd/z4uf9GfyjT/jzoEu8FaxfcMfWPKinztuv5zUryuipY9i2tWxJFnbe6SOD97dhuvGYWTEALjJnTiVzP7WfiIi0tudY+HAy7ZlL1D+rQvxf34AT5MXb0wOU2+cTG5oG88+vY/L51/P8JjW3rXvPc+zRybxj9cm8tkfXuetz+rwBgK4Bo6j8MbL24pgh9rtb7Da/yN+NjkdAofZ/vpK3irzgCuRi4f3B9zmAQBNe9i4xcuY26aTn97W5konb9r11P5uGRvLvkthrp9ty35Pbf4oat9eT2lgBLfOn0pGxWaK3thJgz1AbVUdXqebrKtu487xDkq6eL3Vm57nVU82qbV7qfb58Db1Je9H1zNpsAuq/syKP6Zwz+35eN57iRWfHAMg4K2jOm48C+65nCTPHt5auZHth7wEApAyejq3Tu5P5ZqVbPmiCpY8wzZ3NjPmjKP67df56/j53HAxgIfS9a+zdvsBvCEH7sH5zJhxOZkuoGIt//auk7y4Kv63LoC3MUDSd39E4bh0nG1viYiInD3OsXAAhA5RWjWOf7x9KvEEqFz3NK/+aQS5U4YyImUzu8oDDB/mAOrYtdtD7t8Mwgmk5E3mjmnpxFPH5uef4a3do5iT57KevV3tltdZe3QUdzyQT6rdw/YVz7AtNMraDQ7v5cuYHMYNsLTb+5N7cSzbKw5BbiKEDrPlnX3MKPwnClMcEKpi7Zq/kHH9XOYMdNCwdRm/q7qSOeP7A4FuXm+Ays/qmHTvbdzgAm/pSn771sfk3XW5acYgY/wt/Gw8QB3bli2j9NJLWo/H9Sd30o+ZNMiN0/MxSxZvZFv+7Vz5w8kML9tI6pzbGHcBgJdqw/lqt65k9f5s5sy/hdQYL+XrXqBoTQo/m5mNC/B/vhf/nbdz50AHtJ23JO8WunmLRUTkG/J1TWh/jZxkXTKMeAAcZKSn0FBXhx83w0ekUfnpXvwAdbspacwm7yIH4CB1UDrxdsCeyMWD+uL1+AzntPJQWlZH1thRpDoAu5u8Mdltz2nh9eKNjW09t4XL5cLb2PE8mfmTyUtpy2uhOmoa+5OZ3rofn5GOs+YwrcsUun+9Sd++hNy2outKH0RSYx21ofbDJg3b17ORK5mR1zbrYU8kc5C79YrePYSsfl48HuOISDyU7j5M5rjvkhoD4CJrfD5JZTspD7R1SRlK3sC23y0ujQz3MWqPth0TEZGzyrk3c0AsfVyGX8tQlOOHDSP1nZ2UN2WTuusveHMmk2kHvFVs++N7bK/ygh28tcdw5neM68yH1xtLvNvwPC437ggBAJcLl89HQwiSLMe9Xi+uuNi2vVjiEw2X0Y4UUt0bKa3wknuRi+qKfTBgaGsAOcHrdcWGz9kmaN5t59nJ6ne9XHnbqPZg4z+0k42bPqbcAw4C1B4KMMI0KBIf3sZY4uPM70e83UNDeNGly0X7b9f2PvjD+yIiclY5B8NBN+KGkpexme3lh8ko9ZI7ZRAA5Rte4T2mc88dQ3ABlW8sZq15pEUsLpeP6sYA7W9hkxdvKMIc+YAhZDRtpPQQZJpuLRym9HMfGZNSiFwm+zNpyhAWvfI8v0tx40q8hMJpJ/t6I/FSsm4z3jG3MC4x3FbFxlc2Ujv+du651A3UsfGZl9pmK7rTF3ecj2qP4f3wemgIuYmP8JaIiMjZLdK17jnMRe7wdL78cCMlTTnkDQQI4G304bogsfXK1rOHD8rqIpbrDm5ycxIp37azdbo+5KHkgz2RPyLoyGbSOAcfrHid7Qfbyqz3MCVrVrLFOY5JOV3ns7/u2kvG9Lncc/ttzLk+v22B5Mm83s68Zet5q+4SZnQkAwj58HodxF/QWtG9FR+z62DbfQG7C1d0HdVHwvcJjFzkXppG5ZY/t33U0Uvle9uovXgoWV3/eq0CVWxeuZ6SOusBERH5ppzof93nHFfOCFL+8AqHvnsXGXYAB98eP55trzzP/93mwJWUzfhLh5gW20WSNG46kw+u5He/3ogjxk1mXjZZh6y9WqVO+DE/iV7PW7//Las9foh2k5F7OXN+kt/NxxgDuBKclLz8KA84weFwET8onxtmXnlSr9fMw/b3dlJ7JJEXF+9sbXJfQuFtVzJuYjovFv0r22P6kpR5OXm5blqXHPQn/3uDWPLKQh5zX8LMe8Z3nA6IHz2dmUdfp2jRltZPK3wrn8IZwzpuJXTFf5jKsjK8Yycz3JBTRETkm2Pz+XwtoVAI4xYIBAgEAvj9fgYOHGgdI18D766VPLtzEIXX5ZPqAgJ1bF/xPNsy7+LOcRE+MikiItKN/fv343Q6cTgcOBwO7Ha7abPZbO1bl9et8s3y1tQRSEwjqf3SO0CD10F8wgmvxUVERE7JeXdbobdIGjOJvJVvsGgROOwQwEHGiOlMHab/ZCIicmbptoKIiMh5QLcVRERE5KQpHIiIiIiJwoGIiIiYKByIiIiIicKBiIiImCgciIiIiInCgYiIiJgoHIiIiIiJwoGIiIiYKByIiIiIicKBiIiImCgcnBQ/S1d8yt2VIeuBs17FljLGve+1NouIiLQ7T8KBl8eW7cC1aBfpi3eR/uSn5K3cz7o6a7/TzU/xHg/11uYeC1G8cTfpr9edwjm6Vrp1D1e932ht7rEDe+vZ0Rze87N8VSn39cLAJCIiZudJOADssTx00wiq7h1B1V3ZPHGBhznv1JyRotvOW8/CPx/jgLW9pwLHWL7PQe7RWtadgYv9wUPTeGS4y9rcQz6WFx9he1N438mEsRnMHnD+/JMSETlXOawN5wVHNBO/HUfC5mbqgASaWf12JY/ubaY+AAlp/Vg6dQAjowGaeWfzPu779DgHQ3YGZA+keHKc6XQVJZ9z7a4+LJ2ZxsjwO9rs4bE/VPPu4RCFy+pxDUpj06QEqD7MfRsOse5YCziimXFFJk98O9p0vjBfeQ3FA1J5qm81j/2lmZtGtfXbv5+8rVAY6+OdhiAHmmxM/G4mTwyNBvwsXVnOjrQ4Dnzho74piM+dyFM/GMDIWNPpOfBpFfcHB7HlChcQomL3fu7eUs8OH8QmJPPyzRnkHTzInI01bD/Wgg8nMyYO5olv21i38a88Xe2DFaUsi0vg8Zn9KP3TPnbkD+WpTDt4PSxcv5+lXwbx2aMY+Z0Mll4RTwKttzbmNMaTe9RDRVMLB5qjKJw0mPmDoswvUEREvhHnRjjwNXDf2gam/G0avF/BO9lDeHRQN1ewgWbWfdZI4qBBDAbAwcihGbwzKY4EfDy9fA+PlvVn1fAoDuzYx5wv41g1J4uRsSHqvRBLsP1U9fv2c/OHUTxqDAYA0W4WXJ3MurUhltyaQS5AwMN9/30EJmazN8uJr+4wc1ZUsLB/DvOTDWMBCLKu1MfEUfEUxHnxra+lYtSAttcLvn2N+G6+mDdT7XD0MNcW7WPphVnMdgOhZtbVDGD7jYNIIEjxxj3M/p84tk9yG5/A7HA1N//Jz23Xf4c3k+34vEFi7YDbzV1T+1OQGEV9eSUFmw9TmJ3BlInpzNh7gNyZ2a3PiZ/S9pMFWbfxr6xO/BbF090kNHtZuOpzZu/MZtUlrQGneK+fBT/JZqILfOWV5L1/mBk3d/x+IiLyzemmgvYWzSx/80sOZvdjcGklD3sSmRspGISaWfhfu0h/chdJi3Zzd00Cj+eHZwDsDB4YR4IdsMdSMNBJ/TE/4GfdHh8TL0ttu+q2k+AKn9sGdUeY/baP2/52EFPMkwmRVdWxLjaB+VlOAGIT+3NXVoDVn/ksHYHGWoqOuikcaIfkZGbYj7K82nA8OZ4ZqW2v5YJkCtOO8+6+cGixUZBzAQkARFEwPB7XvgZ2dLMcoHRPA3VZKcxObj1nrKvtKt4dR0Fi6+OEQW5yff4T3yYJNLC8Ipa5+e7W1xDtYu6oOHZ8drT9Ns7gIYlMbLujEZvah8HHmjnQzesTEZGvT6+fOajfuY+HSGHLEA93/x7mzkomzdoJwB7N/L/LZUEqEAqyY0clhSsOUHRLGiObG1n+Pwcpqg6CHXxH/XAJQICDXhsD+kYIGwRZvfUQEEdhbKTjERwPUu9ymV5fWpyDOo8fMM/5V3xax7rDjaxbeLi9bfDuRhaktqUQZ1Rb8W+VEGPnwPEgYAPsJBjvVMQ6ifUdb7uFElldY4A0d2to6RDiQHk1j+3wUBGwA352BF3MtvTqpMlPnd1BQkxHU2xfJwneAAdo/U0TY3v9Pz0RkXNWD6va2SshJ4UZniMs81zA3CHNLP24kQjX4Wb2KEZekkTeUQ/FjSGKN1fwRKg/RYXZvHljNk9kh+99OxgQE+TgsUiXtHYmXpnDpkuaeWh9zYmvpgEMBTLsQGOAxDhrUfayuqyFR28biff+tu2ODAaX11AcCHfxc7D9ZbVwsDFEQp/w6w5R720JH4TGZuqinSR2tHSS2MfOgUa/ufHoEeasbyR3YhZv3pjFm9P7MbYnywJinKSFAhxoX6wIvmN+6l2OyMFNRETOKr0+HBAbz6Pfv4Ditw/C+EFM+et+Ht0XqZgbhagorafYGUuuCw42hUh0R7deVTfWU7Q3XIGdTMyK5Z2PD1Ha3Dqu3tOx3iChTxS5Ywcx23uAuzs+09chNoqEY82Uhj9pMCCRGYF6Fu5pK8J1h3mm3MGMbOtKwVqK7Bcww7gOwZ3IjAs8LA9/VLCunqV7W8/jqzrI0wf6MKV9QV+QdbsOt77mUDOrP6zHlxnPyG7+a+deFE/snkMsr2s9v6/Rj685SL09isFxdiBE6c6jbA3/+nYHiQ4/pTUR3mtHPDcNaWLZtraPcTZ7efrjRkZmh291iIjI2eycmNuNTR3AqplBYl1RTLx2CPXREapg25qDp21AC8Re4Gb+tAwmOuz4xqRQtHYPQ3ZEkZB4Affl9m1fXDd4VCZPHa3k2ucPUR+EAbmDKL7asMDA7mL+9/vxzop9LM3MYrbx8jwukbnZddz9H5/yaFYG70xJ5KGpKdy3YQ9DNoY/rfAt5vc3jCFEcUk9iRdfbFmc5+TaobE8tvso9aOAdDeDS/cy9G0/Pns0MyZlti0MBIhmSlqA+17aTamvhYS0fhRd0c1iRIC0NIrG7ePuFZ9yXxPEJibz8s39WTCkgruf/5TYPk7yhidyU+LxtgEubrqsD9e+8SlD+ybx1C2phpNFMfHqTEo37KfgGT8+ohj5nYE81frxDxEROcvZfD5fSygUwrgFAgECgQB+v5+BAwdax8g3bf9+hv4pmk03pkSYpvezdEUZO/K/w1OZ1mMiInK+2r9/P06nE4fDgcPhwG63mzabzda+RbjElnNDhOl+ERGRHlA4EBERERPdVhARETkP6LaCiIiInDSFAxERETFROBAREREThQMRERExUTgQERERE4UDERERMVE4EBEREROFAxERETFROBAREREThQMRERExUTgQERERE4UDERERMVE4EBEREROFAxERETFROBAREREThQMRERExUTgQERERE4UDERERMVE4EBEREROFAxERETFROBAREREThQMRERExUTgQERERE4UDERERMVE4EBEREROFAxERETFROBAREREThQMRERExUcPl/kgAAAKmSURBVDgQERERE4UDERERMVE4EBERERM7gM1ms7aLiIjIeSBSBuh25iDSABEREel9vkpNN4WDrzJQREREeq/uan63MwciIiJy/ukyHHSXKERERKT36Wlt7zIcQM9PIiIiIme3r1LT28OBcdBXOYGIiIj0Hj2p913OHNhsti4HiYiISO9yorpuPGa3dgwPPtFJREREpPforr6H98PHTLcVrAetg0VERKR3stb27up8p29INA6227u86yAiIiK9iN1u7xQQIPK6A0f4gTFJhH/abDYOHTpEMBgkFAoRDAZpaWkhFAoRCoVoaWkxbUCnn1ZdtYuIiEiHSEUbuq7Xxgv7cBCIiorCbre3/4w0NpL2cACtqSIYDGK322lpaek0c2Cz2QgGg+1PfjLhwKgnfURERM4XXRVrI2tht4aD8BYVFWUKCOFwEK7t1hpv5AifPFyoIwWElpYWoqKiCIVC7X0jbcbzWB+LiIjIqTGGhxOFA2sg6CoYGMeEdbqtEA4EoVCo0+xAeLA1FFiDgTUUWPdFRESk54yF27hv/GndwoEg0mPjGKPwvum2AnR+ImhNGMaAYFxvAB0zCeHHYQoFIiIip4+xmEeq15HCQFdbd9pvKxiFQ0A4FADttxTAHBbCfY2PjecQERGR08dYW42F3lr8w5vx9kJ3fY3n7DRzAOYnDu9bA8HpmDXoSR8REZHzhbX+RmIt5OGf1sfdbZEY2zutOYgkUjAwzhQYH0PPZw0UDkRERDr0pHZC54AQ3reGgJ5skXT6tEJXHa1sNnMo+KqzBiIiInJyjLU6/NhY7K0BINJmHG8cBxFmDk4UEmy2yKFA4UBEROTrYS3u1p/Wx8bNOK6rWu+AjoJv7GTdh45+xsfWsZHGiYiIyOllLfTWn9bH3e1bf/5/exD0cL6ZXN4AAAAASUVORK5CYII=" width="519" height="199" class="img_ev3q"></p>
<p>Not that doing the authentication request with <code>account_hint={ORG-ID}</code> will skip the selection during log-in but still verify that the user has an organization or has membership.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="direct-grant-flow-configuration">Direct Grant Flow (Configuration)<a href="#direct-grant-flow-configuration" class="hash-link" aria-label="Direct link to Direct Grant Flow (Configuration)" title="Direct link to Direct Grant Flow (Configuration)">​</a></h3>
<p><code>account_hint={ORG-ID}</code> of &quot;Select Organization&quot; authenticator can also be used for a <code>Direct Grant</code> flow.
For that, apply the same configuration as the browser flow to the direct grant flow.</p>
<p><img decoding="async" loading="lazy" alt="direct-grant" src="/assets/images/direct-grant-00117410454e16b015e159c4c0a247e5.png" width="1597" height="633" class="img_ev3q"></p>
<p>Then, when you make the direct grant authentication, you can pass the query parameter <code>account_hint{ORG-ID}</code> and it will be used to define the active_organization.</p>
<p><strong>Example:</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{{HOSTNAME}}/realms/{{REALM}}/protocol/openid-connect/token?account_hint={ORG-ID}</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" alt="direct-grant-2" src="/assets/images/direct-grant-2-80f524846c71109236bef256fe2bed28.png" width="1876" height="710" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/p2-inc/phasetwo-docs/tree/main/docs/organizations/active-organization-authenticator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/organizations/active-organization/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Active Organization</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/organizations/organizations-import-export/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Import/Export</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#explanation" class="table-of-contents__link toc-highlight">Explanation</a><ul><li><a href="#promptselect_account" class="table-of-contents__link toc-highlight">prompt=select_account</a></li><li><a href="#account_hint" class="table-of-contents__link toc-highlight">account_hint</a></li><li><a href="#account-switching" class="table-of-contents__link toc-highlight">account switching</a></li></ul></li><li><a href="#built-in-flows" class="table-of-contents__link toc-highlight">Built-in Flows</a><ul><li><a href="#select-org-browser-flow" class="table-of-contents__link toc-highlight">Select Org Browser Flow</a></li><li><a href="#select-org-direct-grant-flow" class="table-of-contents__link toc-highlight">Select Org Direct Grant Flow</a></li></ul></li><li><a href="#configuration--example" class="table-of-contents__link toc-highlight">Configuration &amp; Example</a><ul><li><a href="#browser-flow-configuration" class="table-of-contents__link toc-highlight">Browser Flow (Configuration)</a></li><li><a href="#examples-tests" class="table-of-contents__link toc-highlight">Examples (Tests)</a></li><li><a href="#direct-grant-flow-configuration" class="table-of-contents__link toc-highlight">Direct Grant Flow (Configuration)</a></li></ul></li></ul></div></div></div></div></main></div></div><div><noscript>Free cookie consent management tool by
        <a href="https://www.termsfeed.com/">TermsFeed</a></noscript></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Phase Two</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/company/about/">About</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/company/careers/">Careers</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" activebasepath="hosting" href="/hosting/">Hosting</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/sso" href="/product/sso/">SSO</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/identity" href="/product/identity/">Identity</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/organizations" href="/product/organizations/">Organizations</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/adminportal" href="/product/adminportal/">Admin Portal</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/onprem" href="/product/onprem/">On-Prem</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/api/phase-two-admin-rest-api/">API</a></li><li class="footer__item"><a href="https://github.com/p2-inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/support/migrate-to-keycloak/">Migrate to Keycloak</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/contact/">Contact</a></li><li class="footer__item"><a class="footer__link-item" href="/support/">Enterprise Support</a></li><li class="footer__item"><a href="https://github.com/p2-inc/phasetwo/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bugs &amp; Feature Requests<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:support@phasetwo.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">support@phasetwo.io<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://dev.to/phasetwo" target="_blank" rel="noopener noreferrer" class="footer__link-item">DEV.to<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCUY2ZvxI0hxpTWO_8w7MjVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://trust.phasetwo.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trust Center<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/company/privacy/">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/company/terms/">Terms of Use</a></li><li class="footer__item"><a href="https://trust.phasetwo.io/subprocessors" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subprocessors</a></li><li class="footer__item"><a class="footer__link-item" href="/company/service-agreement/">Service Agreement</a></li><li class="footer__item"><a class="footer__link-item" href="/company/sla/">SLA</a></li><li class="footer__item"><a href="#open_preferences_center" class="footer__link-item" id="open_preferences_center">Cookies Policy</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title"> </div><ul class="footer__items clean-list"><li class="footer__item">
                <img class="footer-logo" src="/img/logo_phase_slash.svg" alt="PhaseTwo" width="114" height="51">
              </li><li class="footer__item">
                <img class="soc-2-footer" src="/img/soc2_type1/SOC 2 T1 Logo Rectangle Black.png" alt="SOC 2 Type 1" width="114" height="auto">
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Phase Two, Inc.</div></div></div></footer></div>
</body>
</html>