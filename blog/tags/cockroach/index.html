<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">3 posts tagged with &quot;cockroach&quot; | Phase Two enhanced Keycloak as a Service</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://phasetwo.io/blog/tags/cockroach"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="keycloak, iam, sso"><meta data-rh="true" name="description" content="Tools for SaaS builders - Enhanced Keycloak as a Service"><meta data-rh="true" property="og:logo" content="/img/appstore.png" size="1024x1024"><meta data-rh="true" property="og:image" content="/img/appstore.png" size="1024x1024"><meta data-rh="true" property="og:logo" content="/img/playstore.png" size="512x512"><meta data-rh="true" property="og:title" content="3 posts tagged with &quot;cockroach&quot; | Phase Two enhanced Keycloak as a Service"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://phasetwo.io/blog/tags/cockroach"><link data-rh="true" rel="alternate" href="https://phasetwo.io/blog/tags/cockroach" hreflang="en"><link data-rh="true" rel="alternate" href="https://phasetwo.io/blog/tags/cockroach" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://W4PN7W5A70-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Phase Two enhanced Keycloak as a Service RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Phase Two enhanced Keycloak as a Service Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160183620-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-160183620-1",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Phase Two enhanced Keycloak as a Service" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.72c9e936.css">
<link rel="preload" href="/assets/js/runtime~main.f51ff43e.js" as="script">
<link rel="preload" href="/assets/js/main.f8580d76.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#3fa1e3;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><a href="/blog/dedicated-launch">Announcing Dedicated Clusters!</a> Isolated compute, network and storage for your Phase Two Keycloak cluster.</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_phase_slash.svg" alt="Phase Two" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_phase_slash.svg" alt="Phase Two" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Product</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/product/sso">SSO</a></li><li><a class="dropdown__link" href="/product/identity">Identity</a></li><li><a class="dropdown__link" href="/product/organizations">Organizations</a></li><li><a class="dropdown__link" href="/product/adminportal">Admin Portal</a></li><li><a class="dropdown__link" href="/product/onprem">On-Prem Deployment</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developers</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/introduction">Docs</a></li><li><a class="dropdown__link" href="/api/phase-two-admin-rest-api">API</a></li><li><a href="https://github.com/p2-inc/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li></ul></div><a class="navbar__item navbar__link" href="/#pricing">Pricing</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://phasetwo.io/dashboard/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" buttontype="btnSecondary">Dashboard<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://phasetwo.io/dashboard/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" buttontype="btnPrimary">Get Started<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">News</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/keycloak-orgs-presentation">Presentation on Multi-Tenancy in Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/customizing-email-templates">How to Customize Email Templates in Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/identity-brokering-on-prem">User Management and Identity Brokering for On-Prem Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/open-source-iam">Keycloak: An open source alternative to Auth0, WorkOS, Okta, Cognito, ...</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/keycloak-on-cockroachdb">Keycloak on CockroachDB: Scalable, Resilient, Open Source, Identity and Access Management</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/instant-user-managemenet-and-sso-for-vue">Securing Vue Apps with Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/instant-user-managemenet-and-sso-for-nuxt">Securing Nuxt Apps with Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/secure-django">Django Web Authentication with Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/instant-user-managemenet-and-sso-for-nextjs">Securing Next.js Apps with Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/instant-user-managemenet-and-sso-for-reactjs">Instant User Management, SSO, and Secure Pages for ReactJS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/dedicated-launch">Launching Dedicated Clusters</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/customizing-login-pages">How To Customize Login Pages</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/licensing-change">We&#x27;re Changing Our License</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/sso-setup">Setting up SSO with Phase Two</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/securing-apps-with-keycloak">Protecting Your Application With Keycloak</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/set-up-magic-links">Magic Links Guide, and 5 Minute Setup</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/set-up-email">Set Up Email in Phase Two</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/self-service">Self-service (beta) Launch</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/magic-link">Magic Links</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/orgs">Multi-tenant Extensions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/connect">Introducing Phase Two Connect</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/wizard">SSO? Wave Your Magic Wand</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/events">Events and Audit Logging Extensions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/free-realm">Free as in Beer</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/keycloak">Keycloak, and Our Commitment to Open Source</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/welcome">Welcome to Phase Two</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>3 posts tagged with &quot;cockroach&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/keycloak-on-cockroachdb">Keycloak on CockroachDB: Scalable, Resilient, Open Source, Identity and Access Management</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-12-06T00:00:00.000Z" itemprop="datePublished">December 6, 2023</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Phase Two</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="/assets/images/2023-12-06-keycloak-on-cockroachdb-kcpluscrdb-7f7d695702b7bfdf50100646b7133da8.png" width="500" height="256" class="img_ev3q"></p><p><a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">Keycloak</a> has been a leader in the Identity and Access Management (IAM) world since its launch almost 9 years ago. The market for IAM tools had several commercial offerings that failed to meet many business model and price needs, and Keycloak filled the hole with an open-source offering. </p><p>Fast-forward to today, Keycloak still leads with mature protocol implementations, hardened security, and a reliable architecture that has been battle-tested for years, under the stewardship of the maintainers at <a href="https://www.redhat.com/" target="_blank" rel="noopener noreferrer">Red Hat</a>. Whether deploying an in-house identity provider, or a user management system for a SaaS offering, Keycloak is an obvious choice.</p><p>With time, customer needs have evolved to include greater resiliency, expanded database selection, deploying in multiple regions, and operating across clouds. Because of operational complexity and architectural barriers, the Keycloak team decided to embark on a project to build a new underlying storage architecture. While promising, the project has taken longer than expected, and has yet to produce a production-ready result.</p><p>One of the great aspects of open source, is that it allows anyone to participate. About 18 months ago, <a href="https://phasetwo.io" target="_blank" rel="noopener noreferrer">Phase Two</a> decided to implement support for CockroachDB for the existing storage architecture in order to meet this growing customer demand. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="remind-me-what-is-phase-two">Remind me, what is Phase Two?<a class="hash-link" href="#remind-me-what-is-phase-two" title="Direct link to heading">​</a></h2><p>Phase Two helps SaaS builders accelerate time-to-market and enterprise adoption with powerful SSO, identity and user management features. To that end, Phase Two has created an enhanced distribution of Keycloak that bundles several essential <a href="https://github.com/p2-inc" target="_blank" rel="noopener noreferrer">open source extensions</a> for modern SaaS use cases. Phase Two supports hosted and on-premise customers for a variety of use cases.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-we-built-support-for-cockroachdb">How we built support for CockroachDB<a class="hash-link" href="#how-we-built-support-for-cockroachdb" title="Direct link to heading">​</a></h2><p>We eagerly dove into the challenge of adding CockroachDB support, but we quickly encountered a few key issues:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-sql">1. SQL<a class="hash-link" href="#1-sql" title="Direct link to heading">​</a></h4><p>Keycloak internally uses the <a href="https://hibernate.org/" target="_blank" rel="noopener noreferrer">Hibernate ORM framework</a>, which generates the SQL for the database type selected (called a &quot;dialect&quot; by them). Fortunately for us, the <a href="https://www.cockroachlabs.com/" target="_blank" rel="noopener noreferrer">Cockroach Labs</a> team had already built a custom <a href="https://www.cockroachlabs.com/blog/building-support-for-java-orm-hibernate-in-cockroachdb/" target="_blank" rel="noopener noreferrer">CockroachDB Hibernate dialect</a> that we were able to use without modification.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-migrations">2. Migrations<a class="hash-link" href="#2-migrations" title="Direct link to heading">​</a></h4><p>The <a href="https://www.liquibase.org/" target="_blank" rel="noopener noreferrer">Liquibase</a> library is used by Keycloak for tracking, managing, and applying database schema changes. However, the authors had not anticipated adding support for entirely new database types without making code changes. We had to add CRDB, the Hibernate dialect, and the correct JDBC driver classes to the code to enable first-class support.</p><p>We ported the migrations that were incompatible with CRDB. This was required because of a few SQL semantics that are not supported in CRDB the same way they are in PostgreSQL.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-transactions">3. Transactions<a class="hash-link" href="#3-transactions" title="Direct link to heading">​</a></h4><p>Because CRDB uses <a href="https://www.cockroachlabs.com/docs/stable/transactions#serializable-isolation" target="_blank" rel="noopener noreferrer">serializable isolation</a> by default, it was incompatible with Keycloak&#x27;s use of distributed (&quot;XA&quot;) or two-phase commit (&quot;JTA&quot;) transaction managers. However, because the use of these is not necessary outside of an environment where other applications are using the same resources, it was possible to disable them. The Keycloak team was helpful in adding some environment variables to disable these, as they had also seen other database use cases that required it.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-an-incredible-team">4. An <strong>Incredible</strong> Team<a class="hash-link" href="#4-an-incredible-team" title="Direct link to heading">​</a></h4><p>It also wouldn&#x27;t have been possible to complete the changes without tireless support from the Cockroach Labs engineering team. They patiently helped us understand how CRDB is different, wrote code examples and tests, and were never shy about giving us access to everyone in the organization, regardless of level and how busy they were. </p><p>A <strong>HUGE</strong> thank you to the whole Cockroach team!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-it-work">How does it work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">​</a></h2><p>About 12 months ago, we launched our self-service, free product, built on our CRDB port and running on Cockroach Labs&#x27; managed serverless product. Over that period, we&#x27;ve provided over 900 free deployments, without a single production incident for both CockroachDB serverless and Phase Two enhanced Keycloak. </p><p>Furthermore, we&#x27;ve built out a test system that we run prior to releasing new versions in order to ensure that there are no regressions compared to the main Keycloak distributions. We run that test system and several benchmarks prior to releasing each new version of our fork.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-this-important-now">Why is this important now?<a class="hash-link" href="#why-is-this-important-now" title="Direct link to heading">​</a></h2><p>The Keycloak team had embarked on an ambitious project over 2 years ago to completely overhaul the storage architecture. The so-called &quot;map store&quot; was designed, among other things, to provide a basis for high-availability by replicating data with multiple data centers. However, after that time period, there was still a lot of uncertainty and risk involved in getting to the point where the store was production ready. Thus the team decided to drop the project. <a href="https://www.keycloak.org/2023/10/map-store-removal" target="_blank" rel="noopener noreferrer">See the announcement</a>.</p><p>That leaves Phase Two&#x27;s CRDB support in a unique position, as it is the only version of Keycloak that will support Cockroach&#x27;s multi-region database. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="take-me-to-it">Take me to it!<a class="hash-link" href="#take-me-to-it" title="Direct link to heading">​</a></h2><p>We get it! Here are a few links to help you jump-start your work:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-managed-hosting">1. Managed Hosting<a class="hash-link" href="#1-managed-hosting" title="Direct link to heading">​</a></h4><p>Phase Two provides self-service deployments of Keycloak hosted on multiple clouds. <a href="https://phasetwo.io/#pricing" target="_blank" rel="noopener noreferrer">Plans</a> start with a free version for testing and small production use cases. Dedicated clusters are available for customers requiring an SLA, isolated resources, and the ability to grow into larger use cases.</p><p>The database tier for our shared and dedicated clusters uses the <a href="https://www.cockroachlabs.com/lp/serverless-database-p" target="_blank" rel="noopener noreferrer">CockroachDB serverless</a> service. Working with Cockroach Labs gives us the expertise and reliability of hosting thousands of customer clusters at a massive scale. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-community-distribution">2. Community Distribution<a class="hash-link" href="#2-community-distribution" title="Direct link to heading">​</a></h4><p>If you&#x27;re more DIY, and you&#x27;re planning to run everything yourself, the base distribution image that contains our changes to Keycloak to enable CockroachDB support is available in the Phase Two <a href="https://quay.io/repository/phasetwo/keycloak-crdb?tab=info" target="_blank" rel="noopener noreferrer">Keycloak CockroachDB docker repository</a>. It&#x27;s a drop-in replacement for Keycloak that doesn&#x27;t require much configuration beyond the <a href="https://www.keycloak.org/guides" target="_blank" rel="noopener noreferrer">official guides</a>. We generally release a version within 1-2 days of the official Keycloak release.</p><p>For the impatient, we&#x27;ve also put together a complete <a href="https://github.com/p2-inc/phasetwo-containers/blob/main/examples/cockroach/docker-compose.yml" target="_blank" rel="noopener noreferrer">docker compose</a> example that includes a single node CockroachDB instance. You can also modify the configuration to use your own CockroachDB dedicated or serverless database.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-future">The Future<a class="hash-link" href="#the-future" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="keycloak-on-crdb">Keycloak on CRDB<a class="hash-link" href="#keycloak-on-crdb" title="Direct link to heading">​</a></h4><p>Because of the uncertainty around the direction of the Keycloak storage architecture, Phase two is committed to maintaining support for the &quot;legacy store&quot; and our port to CRDB for the long term.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="phase-two-and-cockroach-labs">Phase Two and Cockroach Labs<a class="hash-link" href="#phase-two-and-cockroach-labs" title="Direct link to heading">​</a></h4><p>Many of our on-premise, support customers with large use cases asked us to build out a solution for massive-scale, fault-tolerant, multi-region use cases. One of the great parts of building support for Keycloak&#x27;s existing storage architecture for CRDB is that we&#x27;ve been able to explore use cases that were previously impossible using the standard Keycloak distribution. For use cases with these requirements, plus global proximity to users and regional failover, we built global clusters, backed by CRDB multi-region database, for which we are now in Beta.</p><p>We&#x27;re excited to see what you build with Keycloak and CRDB!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/keycloak">keycloak</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/phase-two">phase_two</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cockroach">cockroach</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/dedicated-launch">Launching Dedicated Clusters</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-10T00:00:00.000Z" itemprop="datePublished">July 10, 2023</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Phase Two</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We&#x27;re excited today to announce the launch of our dedicated clusters offering. Our Phase Two enhanced Keycloak distribution is now available as a hosted, dedicated cluster in the region of your choice.</p><p>About 9 months ago, we launched our self-service, shared deployments, offering customers the ability to <a href="https://phasetwo.io/dashboard/" target="_blank" rel="noopener noreferrer">create</a> Phase Two enhanced Keycloak realms on our shared clusters. Over that period, we&#x27;ve provided over 700 free realms for testing and small production use cases. Many of you have reached out to us asking about an SLA, isolated resources, and ability to grow into larger use cases. Based on your requests and feedback, we built out our dedicated cluster offering.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-phase-two-again">What is Phase Two again?<a class="hash-link" href="#what-is-phase-two-again" title="Direct link to heading">​</a></h3><p>Phase Two helps SaaS builders accelerate time-to-market and enterprise adoption with powerful SSO, identity and user management features. To that end, Phase Two has created an enhanced distribution of <a href="https://www.keycloak.org/" target="_blank" rel="noopener noreferrer">Keycloak</a> that bundles several essential <a href="https://github.com/p2-inc" target="_blank" rel="noopener noreferrer">open source extensions</a> for modern SaaS use cases. We support hosted and on-prem customers for a variety of use cases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-dedicated">Why dedicated?<a class="hash-link" href="#why-dedicated" title="Direct link to heading">​</a></h3><p>Dedicated clusters allow us to provide compute, network and storage isolation for customer workloads, and to easily deploy in the region where customer&#x27;s users are. With dedicated clusters, we can guarantee an <a href="/docs/sla">SLA</a> that meets customer&#x27;s needs with no resource contention from other customers.</p><p>Furthermore, it allows us to support customer-provided domain names, and access to monitoring and management capabilities not available in the shared clusters.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-did-you-do-it">How did you do it?<a class="hash-link" href="#how-did-you-do-it" title="Direct link to heading">​</a></h3><p>We built out our dedicated cluster offering using the best-of-breed open source tools and managed services.</p><p>The core consists of Kubernetes clusters in each <a href="/docs/self-service/dedicated-clusters#regions">supported AWS and GCP region</a>. New dedicated clusters are provisioned instantly using FluxCD, a continuous delivery solution that gives us the history and auditability of git. Monitoring and alerting is done using Prometheus, Grafana, and a suite of external services that give us a complete view of cluster health.</p><p>The database tier uses a managed CockroachDB service provided by <a href="https://www.cockroachlabs.com/" target="_blank" rel="noopener noreferrer">Cockroach Labs</a>. Phase Two is the only provider that is capable of hosting the current Keycloak distribution (the &quot;legacy&quot; store) using CockroachDB. Working with Cockroach Labs gives us the expertise and reliability from hosting thousands of customer clusters at massive scale. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="take-me-to-it">Take me to it!<a class="hash-link" href="#take-me-to-it" title="Direct link to heading">​</a></h3><p>Starting today, you&#x27;ll be able to <a href="https://phasetwo.io/dashboard" target="_blank" rel="noopener noreferrer">log into the updated dashboard</a>, and create your dedicated cluster by selecting a region and setting up your billing information.</p><p><img loading="lazy" src="/assets/images/dedicated-clusters-create-a112370f035b7c7cf6c3ff68991c34c8.png" width="834" height="991" class="img_ev3q"></p><p>Following successful billing setup, you will be returned to the Dashboard while your Cluster is provisioned. Once provisioned, you&#x27;ll be able to create up to 20 realms per cluster, using the same easy setup as you are used to in the shared deployment offering.</p><p><img loading="lazy" src="/assets/images/dedicated-clusters-pending-c6502bdcf66f489aff1bb473fefca1c0.png" width="1221" height="223" class="img_ev3q"></p><p>Most clusters will be provisioned within 30 minutes, but some requests may take up to 24 hours. Additionally, for payment types such as ACH or SEPA, cluster provisioning will begin following payment clearing (up to 4 days in some cases).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-much-does-it-cost">How much does it cost?<a class="hash-link" href="#how-much-does-it-cost" title="Direct link to heading">​</a></h3><p><a href="/#pricing">Plans</a> start at $499US per month when paid annually. This provides a set of compute, network and storage resources that have been tested for common use cases for up to 20 realms and 1 million users. If your use case is uncommon or you plan to scale beyond that, our system is designed to scale up with your needs. Our plans scale linearly with resource demands beyond our minimums.</p><p>We will continue to support a robust Free tier. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next-psst-global-clusters">What&#x27;s next? (psst... Global clusters)<a class="hash-link" href="#whats-next-psst-global-clusters" title="Direct link to heading">​</a></h3><p>Many of our on-prem, suppport customers with large use cases asked us to build out a solution for massive-scale, fault-tolerant, multi-region use cases. One of the great parts of building support for Keycloak&#x27;s existing storage system for CockroacDB is that we&#x27;ve been able to explore use cases that were previously impossible using the standard Keycloak distribution, or required complex, error-prone configurations. For use cases with these requirements, plus global proximity to users and regional failover, we built global clusters, backed by CockroachDB multi-region database, for which we are now in <em>beta</em>.</p><p>These clusters provide a minimum of 3 global regions, with 3 instances of Phase Two enhanced Keycloak per region. Global server load balancing provides geographic region affinity and failover to connect your users with the closest, available instances.</p><p>There will be two price tiers for global clusters, depending on your use of our shared CockroachDB clusters, or your own dedicated clusters. We expect to launch general availability of global clusters later in Q3 2023.</p><p>Please contact <a href="mailto:sales@phasetwo.io" target="_blank" rel="noopener noreferrer">sales@phasetwo.io</a> to talk to us about your global cluster use case.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/keycloak">keycloak</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/phase-two">phase_two</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cockroach">cockroach</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/self-service">Self-service (beta) Launch</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-16T00:00:00.000Z" itemprop="datePublished">September 16, 2022</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Phase Two</span></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We&#x27;ve been pretty quiet over the summer. Since we released the <a href="https://github.com/p2-inc/keycloak-orgs" target="_blank" rel="noopener noreferrer">Organizations</a> and <a href="https://github.com/p2-inc/keycloak-magic-link" target="_blank" rel="noopener noreferrer">Magic Link</a> extensions and open sourced them, there has been a lot of interest in using Phase Two.</p><p>We were flattered by the inbound interest, but our small team wasn&#x27;t able to keep up with demand for trial accounts. Rather than scramble against that demand, we opted to pause new accounts, and instead build a self-service tool to allow anyone to quickly provision a new deployment a try it out.</p><p>Today we&#x27;re announcing the beta launch of the Phase Two Self-service deployment tool. This tool allows you to easily create new deployments of the Phase Two enhanced version of Keycloak in our secure, highly-available clusters. In the future, it will also allow you to deploy dedicated instances that use your own database.</p><p>Take a look at how easy it is to get started:</p><iframe width="560" height="315" src="https://www.youtube.com/embed/zzJPmwrEHmU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe><p>The clusters that run our deployments are available in two regions (AWS, us-west-2 and eu-central-1), and are backed by <a href="https://www.cockroachlabs.com/" target="_blank" rel="noopener noreferrer">CockroachDB</a>, giving you scale, resilience and low-latency performance. In the future, clusters and dedicated instances will be available in other regions based on demand.</p><p>We hope you find this new tool valuable, and we look forward to feedback and participation from both our customers and the wider Keycloak community.</p><p><a href="https://phasetwo.io/dashboard/" target="_blank" rel="noopener noreferrer">TRY IT NOW!</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/keycloak">keycloak</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/phase-two">phase_two</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/cockroach">cockroach</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Phase Two</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about">About</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/careers">Careers</a></li></ul></div><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" activebasepath="product/sso" href="/product/sso">SSO</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/identity" href="/product/identity">Identity</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/organizations" href="/product/organizations">Organizations</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/adminportal" href="/product/adminportal">Admin Portal</a></li><li class="footer__item"><a class="footer__link-item" activebasepath="product/onprem" href="/product/onprem">On-Prem</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/api/phase-two-admin-rest-api">API</a></li><li class="footer__item"><a href="https://github.com/p2-inc" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/p2-inc/phasetwo/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bugs &amp; Feature Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:support@phasetwo.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">support@phasetwo.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://dev.to/phasetwo" target="_blank" rel="noopener noreferrer" class="footer__link-item">DEV.to<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCUY2ZvxI0hxpTWO_8w7MjVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/privacy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/terms">Terms of Use</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/subprocessors">Subprocessors</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/service-agreement">Service Agreement</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/sla">SLA</a></li></ul></div><div class="col footer__col"><div class="footer__title"> </div><ul class="footer__items clean-list"><li class="footer__item">
                <img class="footer-logo" src="https://phasetwo.io/img/logo_phase_slash.svg" alt="PhaseTwo" width="114" height="51">
              </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Phase Two, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f51ff43e.js"></script>
<script src="/assets/js/main.f8580d76.js"></script>
</body>
</html>